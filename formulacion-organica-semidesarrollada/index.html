<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Entrenador Master: Química Orgánica Completa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@500;700&family=Inter:wght@400;600;800&display=swap');

        body { font-family: 'Inter', sans-serif; background-color: #f1f5f9; -webkit-tap-highlight-color: transparent; }
        
        .chem-font { font-family: 'Roboto Mono', monospace; letter-spacing: 0.5px; }
        sub { font-size: 0.75em; vertical-align: -0.25em; }
        
        .animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translateX(-1px); } 20%, 80% { transform: translateX(2px); } 30%, 50%, 70% { transform: translateX(-4px); } 40%, 60% { transform: translateX(4px); } }

        svg.chem-structure { 
            max-width: 100%; height: auto; display: block; margin: 0 auto; 
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.05));
        }
        
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        
        .category-card { transition: transform 0.2s, box-shadow 0.2s; }
        .category-card:active { transform: scale(0.96); }
        
        .formula-container { overflow-x: auto; -webkit-overflow-scrolling: touch; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden text-slate-800 bg-slate-50">

    <!-- Header -->
    <header class="bg-indigo-700 text-white p-3 shadow-lg z-30 flex justify-between items-center flex-shrink-0">
        <div class="flex items-center gap-3">
            <button onclick="resetApp()" class="w-10 h-10 flex items-center justify-center rounded-full bg-white/20 active:bg-white/30 transition-colors">
                <i class="fas fa-home text-lg"></i>
            </button>
            <div>
                <h1 class="font-bold text-sm md:text-base leading-tight">Entrenador Master</h1>
                <p class="text-[15px] text-yellow-200  tracking-wide font-semibold">Programa creado por Javier Gijón. Profesor del IES María Moliner de Segovia.</p>
            </div>
        </div>
        <div class="flex items-center gap-2 bg-indigo-900/40 px-3 py-1.5 rounded-full border border-indigo-500/30">
            <i class="fas fa-star text-yellow-400 text-xs"></i>
            <span class="font-mono text-sm font-bold" id="global-score">0</span>
        </div>
    </header>

    <!-- Main Container -->
    <div class="flex-1 flex flex-col relative overflow-hidden bg-slate-100 w-full">
        <div id="main-scroll-area" class="flex-1 overflow-y-auto custom-scroll w-full relative">
            <div class="min-h-full p-4 flex flex-col items-center max-w-4xl mx-auto w-full">

                <!-- 1. HOME SCREEN -->
                <div id="home-screen" class="w-full space-y-4 animate-fade-in pb-10 mt-2">
                    <div class="text-center mb-4">
                        <h2 class="text-2xl font-black text-slate-800 tracking-tight">Selecciona Categoría</h2>
                        <p class="text-sm text-slate-500">Base de datos de referencia académica</p>
                    </div>
                    <div id="category-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 w-full"></div>
                </div>

                <!-- 2. CONFIG SCREEN -->
                <div id="config-panel" class="hidden w-full max-w-lg bg-white rounded-3xl shadow-xl overflow-hidden animate-fade-in my-auto">
                    <div id="config-header" class="bg-slate-700 px-6 py-8 text-center text-white transition-colors duration-300">
                        <h3 class="font-bold text-2xl" id="selected-topic-name">Tema</h3>
                        <p class="text-white/80 text-xs mt-1 font-bold uppercase tracking-widest">Configuración</p>
                    </div>
                    <div class="p-6 space-y-6">
                        <div class="bg-slate-50 px-4 py-4 rounded-2xl border border-slate-100 flex flex-col items-center justify-center text-center">
                            <span class="text-xs text-slate-400 font-bold uppercase tracking-wider mb-1">Disponibles</span>
                            <div class="flex items-baseline gap-1">
                                <strong id="questions-available" class="text-4xl font-black text-slate-700">0</strong>
                            </div>
                            <p class="text-[10px] text-slate-400 mt-1">Mazo inteligente sin repeticiones</p>
                        </div>
                        <div class="space-y-3">
                            <button onclick="startQuiz(5)" class="w-full flex items-center p-4 bg-white border-2 border-slate-100 rounded-2xl hover:border-indigo-500 hover:shadow-md transition-all group">
                                <div class="w-10 h-10 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center font-bold text-lg mr-4">5</div>
                                <span class="font-bold text-slate-700 block flex-1 text-left">Test Rápido</span>
                                <i class="fas fa-chevron-right text-slate-300"></i>
                            </button>
                            <button onclick="startQuiz(10)" class="w-full flex items-center p-4 bg-white border-2 border-slate-100 rounded-2xl hover:border-indigo-500 hover:shadow-md transition-all group">
                                <div class="w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-lg mr-4">10</div>
                                <span class="font-bold text-slate-700 block flex-1 text-left">Test Estándar</span>
                                <i class="fas fa-chevron-right text-slate-300"></i>
                            </button>
                            <button onclick="startQuiz(20)" class="w-full flex items-center p-4 bg-white border-2 border-slate-100 rounded-2xl hover:border-indigo-500 hover:shadow-md transition-all group">
                                <div class="w-10 h-10 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center font-bold text-lg mr-4">20</div>
                                <span class="font-bold text-slate-700 block flex-1 text-left">Examen Parcial</span>
                                <i class="fas fa-chevron-right text-slate-300"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 3. EXERCISE SCREEN -->
                <div id="exercise-panel" class="hidden w-full max-w-2xl flex flex-col bg-white rounded-3xl shadow-xl overflow-hidden min-h-[60vh] md:h-auto animate-fade-in my-auto">
                    <div class="bg-white px-5 py-4 border-b border-slate-100 flex justify-between items-center z-20">
                        <div>
                            <span class="text-[10px] uppercase font-bold text-slate-400 tracking-wider">Progreso</span>
                            <div class="flex items-baseline gap-1">
                                <span class="text-2xl font-bold text-indigo-600 leading-none" id="q-current">1</span>
                                <span class="text-sm text-slate-400 font-medium">/ <span id="q-total">5</span></span>
                            </div>
                        </div>
                        <div class="h-2 w-24 bg-slate-100 rounded-full overflow-hidden">
                            <div id="progress-fill" class="h-full bg-indigo-500 rounded-full transition-all duration-300 ease-out" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="flex-1 bg-slate-50 p-2 md:p-6 flex flex-col justify-center items-center relative min-h-[220px]">
                        <div class="w-full overflow-x-auto overflow-y-hidden py-4 px-2 flex justify-center items-center custom-scroll text-center formula-container">
                            <div id="formula-display" class="chem-font font-bold text-slate-800 inline-block transition-all duration-300 text-xl md:text-3xl"></div>
                        </div>
                        <div id="formula-hint" class="text-[10px] text-slate-400 mt-2 hidden"><i class="fas fa-info-circle"></i> Desliza para ver más</div>
                    </div>
                    <div class="p-5 bg-white border-t border-slate-100 space-y-4 z-20">
                        <div>
                            <input type="text" id="answer-input" class="w-full p-4 bg-slate-50 border-2 border-slate-200 rounded-2xl text-lg outline-none focus:border-indigo-500 focus:bg-white transition-all text-slate-700 font-medium placeholder-slate-400 text-center" placeholder="Nombra el compuesto..." autocomplete="off">
                            <div id="feedback-area" class="hidden mt-3 p-3 rounded-xl text-sm font-bold flex items-start gap-2 justify-center animate-shake"></div>
                        </div>
                        <button onclick="checkAnswer()" id="btn-check" class="w-full bg-indigo-600 text-white font-bold py-4 rounded-2xl shadow-lg shadow-indigo-200 active:scale-[0.98] transition-all flex items-center justify-center gap-2 text-lg hover:bg-indigo-700">
                            <span>Comprobar</span>
                        </button>
                        <button onclick="nextQuestion()" id="btn-next" class="hidden w-full bg-emerald-500 text-white font-bold py-4 rounded-2xl shadow-lg shadow-emerald-200 active:scale-[0.98] transition-all flex items-center justify-center gap-2 text-lg animate-bounce hover:bg-emerald-600">
                            <span>Siguiente</span> <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- 4. RESULTS SCREEN -->
                <div id="results-panel" class="hidden w-full max-w-3xl bg-white rounded-3xl shadow-xl overflow-hidden flex flex-col h-[85vh] md:h-auto animate-fade-in my-auto">
                    <div class="bg-slate-800 text-white p-6 text-center flex-shrink-0 relative">
                        <h2 class="text-xl font-bold mb-1 relative z-10">Resultados</h2>
                        <div class="flex justify-center items-center gap-8 mt-4 relative z-10">
                            <div class="text-center"><div class="text-4xl font-black text-emerald-400" id="res-score">0</div><div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold mt-1">Aciertos</div></div>
                            <div class="h-10 w-px bg-white/10"></div>
                            <div class="text-center"><div class="text-4xl font-black text-red-400" id="res-errors">0</div><div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold mt-1">Fallos</div></div>
                        </div>
                        <div id="res-message" class="mt-4 text-indigo-200 text-sm font-medium relative z-10"></div>
                    </div>
                    <div class="flex-1 overflow-y-auto bg-slate-50 p-4">
                        <div id="results-list" class="space-y-4 pb-4"></div>
                    </div>
                    <div class="p-4 bg-white border-t border-slate-100 flex-shrink-0 z-20">
                        <button onclick="resetApp()" class="w-full bg-slate-800 text-white py-4 rounded-2xl font-bold hover:bg-slate-700 transition-colors shadow-lg"><i class="fas fa-home mr-2"></i> Volver al Inicio</button>
                    </div>
                </div>

                <!-- 5. GUÍA MAESTRA -->
                <div id="info-panel" class="hidden w-full max-w-4xl bg-white rounded-3xl shadow-xl overflow-hidden flex flex-col h-[90vh] md:h-auto animate-fade-in my-auto">
                   <div class="bg-amber-500 text-white p-6 text-center flex-shrink-0 relative">
                        <h2 class="text-2xl font-bold mb-1 relative z-10"><i class="fas fa-graduation-cap mr-2"></i> Guía Maestra</h2>
                        <p class="text-amber-100 text-xs font-bold uppercase tracking-wider relative z-10">Orden de Prioridad (Sufijos)</p>
                    </div>
                    <div class="flex-1 overflow-y-auto bg-slate-50 p-4 md:p-8 custom-scroll">
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 mb-6">
                             <div class="overflow-x-auto">
                                <table class="w-full text-sm text-left text-slate-600">
                                    <thead class="text-xs text-slate-400 uppercase bg-slate-50">
                                        <tr><th class="px-4 py-2">Orden</th><th class="px-4 py-2">Grupo</th><th class="px-4 py-2">Sufijo</th><th class="px-4 py-2">Prefijo</th></tr>
                                    </thead>
                                    <tbody class="divide-y divide-slate-100">
                                        <tr class="bg-indigo-50/50 font-bold"><td class="px-4 py-2">1</td><td>Ácidos</td><td>-oico</td><td>Carboxi-</td></tr>
                                        <tr><td class="px-4 py-2">2</td><td>Ésteres</td><td>-oato</td><td>Aloxicarbonil-</td></tr>
                                        <tr><td class="px-4 py-2">3</td><td>Amidas</td><td>-amida</td><td>Carbamoil-</td></tr>
                                        <tr><td class="px-4 py-2">4</td><td>Nitrilos</td><td>-nitrilo</td><td>Ciano-</td></tr>
                                        <tr><td class="px-4 py-2">5</td><td>Aldehídos</td><td>-al</td><td>Formil-</td></tr>
                                        <tr><td class="px-4 py-2">6</td><td>Cetonas</td><td>-ona</td><td>Oxo-</td></tr>
                                        <tr><td class="px-4 py-2">7</td><td>Alcoholes</td><td>-ol</td><td>Hidroxi-</td></tr>
                                        <tr><td class="px-4 py-2">8</td><td>Aminas</td><td>-amina</td><td>Amino-</td></tr>
                                        <tr class="bg-slate-50"><td class="px-4 py-2">9</td><td>Dobles/Triples</td><td>-eno / -ino</td><td>-</td></tr>
                                        <tr class="bg-slate-100 font-bold text-slate-500 italic"><td class="px-4 py-2">-</td><td>Éteres</td><td>-</td><td>Oxi-</td></tr>
                                        <tr class="text-slate-500"><td class="px-4 py-2">-</td><td>Haluros</td><td>-</td><td>Fluoro/Cloro...</td></tr>
                                        <tr class="text-slate-500"><td class="px-4 py-2">-</td><td>Nitro</td><td>-</td><td>Nitro-</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="p-4 bg-white border-t border-slate-100 flex-shrink-0 z-20">
                        <button onclick="resetApp()" class="w-full bg-slate-800 text-white py-4 rounded-2xl font-bold hover:bg-slate-700 transition-colors shadow-lg"><i class="fas fa-times mr-2"></i> Cerrar</button>
                    </div>
                </div>

                <!-- 6. PANEL FÓRMULAS -->
                <div id="formula-guide-panel" class="hidden w-full max-w-4xl bg-white rounded-3xl shadow-xl overflow-hidden flex flex-col h-[90vh] md:h-auto animate-fade-in my-auto">
                    <div class="bg-teal-600 text-white p-6 text-center flex-shrink-0 relative">
                        <h2 class="text-2xl font-bold mb-1 relative z-10"><i class="fas fa-pen-fancy mr-2"></i> Tipos de Fórmulas</h2>
                        <p class="text-teal-100 text-xs font-bold uppercase tracking-wider relative z-10">Guía de Notación</p>
                    </div>

                    <div class="flex-1 overflow-y-auto bg-slate-50 p-4 md:p-8 custom-scroll">
                        <div class="prose text-slate-600 mb-6">
                            <p class="mb-4">
                                En química orgánica usamos atajos para representar las moléculas. Aquí te explicamos las tres formas principales y <strong>cuál usamos en esta App</strong>.
                            </p>
                        </div>

                        <!-- Comparativa 1: Propano -->
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 mb-6">
                            <h3 class="text-lg font-bold text-slate-800 mb-4 border-b border-slate-100 pb-2">1. De Desarrollada a Semidesarrollada</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                                <div class="text-center">
                                    <div class="text-xs font-bold text-slate-400 uppercase mb-2">Desarrollada (Expandida)</div>
                                    <!-- SVG Propano Desarrollado -->
                                    <svg viewBox="0 0 200 100" class="mx-auto" width="200" height="100">
                                        <line x1="40" y1="50" x2="160" y2="50" stroke="#334155" stroke-width="2"/>
                                        <!-- C1 -->
                                        <text x="40" y="55" font-family="monospace" font-weight="bold" font-size="20" text-anchor="middle">C</text>
                                        <line x1="40" y1="40" x2="40" y2="20" stroke="#334155" stroke-width="2"/><text x="40" y="15" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                        <line x1="40" y1="60" x2="40" y2="80" stroke="#334155" stroke-width="2"/><text x="40" y="95" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                        <line x1="30" y1="50" x2="10" y2="50" stroke="#334155" stroke-width="2"/><text x="5" y="55" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                        <!-- C2 -->
                                        <text x="100" y="55" font-family="monospace" font-weight="bold" font-size="20" text-anchor="middle">C</text>
                                        <line x1="100" y1="40" x2="100" y2="20" stroke="#334155" stroke-width="2"/><text x="100" y="15" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                        <line x1="100" y1="60" x2="100" y2="80" stroke="#334155" stroke-width="2"/><text x="100" y="95" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                        <!-- C3 -->
                                        <text x="160" y="55" font-family="monospace" font-weight="bold" font-size="20" text-anchor="middle">C</text>
                                        <line x1="160" y1="40" x2="160" y2="20" stroke="#334155" stroke-width="2"/><text x="160" y="15" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                        <line x1="160" y1="60" x2="160" y2="80" stroke="#334155" stroke-width="2"/><text x="160" y="95" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                        <line x1="170" y1="50" x2="190" y2="50" stroke="#334155" stroke-width="2"/><text x="195" y="55" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                    </svg>
                                    <p class="text-sm text-slate-500 mt-2">Muestra todos los enlaces.</p>
                                </div>
                                <div class="text-center flex flex-col justify-center items-center">
                                    <div class="text-xs font-bold text-teal-600 uppercase mb-2">Semidesarrollada</div>
                                    <div class="bg-teal-50 p-4 rounded-xl border border-teal-100">
                                        <span class="text-2xl font-mono font-bold text-slate-800">CH₃-CH₂-CH₃</span>
                                    </div>
                                    <p class="text-sm text-slate-500 mt-2">Agrupamos los H con su C.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Comparativa 2: Etanol -->
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                            <h3 class="text-lg font-bold text-slate-800 mb-4 border-b border-slate-100 pb-2">Ejemplo 2: Etanol</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                                <div class="text-center">
                                    <div class="text-xs font-bold text-slate-400 uppercase mb-2">Desarrollada</div>
                                    <!-- SVG Etanol -->
                                    <svg viewBox="0 0 200 100" class="mx-auto" width="200" height="100">
                                        <line x1="50" y1="50" x2="110" y2="50" stroke="#334155" stroke-width="2"/>
                                        <line x1="110" y1="50" x2="150" y2="50" stroke="#334155" stroke-width="2"/>
                                        <!-- C1 -->
                                        <text x="50" y="55" font-family="monospace" font-weight="bold" font-size="20" text-anchor="middle">C</text>
                                        <line x1="50" y1="40" x2="50" y2="20" stroke="#334155" stroke-width="2"/><text x="50" y="15" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                        <line x1="50" y1="60" x2="50" y2="80" stroke="#334155" stroke-width="2"/><text x="50" y="95" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                        <line x1="40" y1="50" x2="20" y2="50" stroke="#334155" stroke-width="2"/><text x="15" y="55" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                        <!-- C2 -->
                                        <text x="110" y="55" font-family="monospace" font-weight="bold" font-size="20" text-anchor="middle">C</text>
                                        <line x1="110" y1="40" x2="110" y2="20" stroke="#334155" stroke-width="2"/><text x="110" y="15" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                        <line x1="110" y1="60" x2="110" y2="80" stroke="#334155" stroke-width="2"/><text x="110" y="95" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                        <!-- O -->
                                        <text x="160" y="55" font-family="monospace" font-weight="bold" font-size="20" text-anchor="middle" fill="#dc2626">O</text>
                                        <line x1="170" y1="50" x2="185" y2="50" stroke="#334155" stroke-width="2"/><text x="195" y="55" font-family="monospace" font-size="14" text-anchor="middle">H</text>
                                    </svg>
                                </div>
                                <div class="text-center flex flex-col justify-center items-center">
                                    <div class="text-xs font-bold text-teal-600 uppercase mb-2">Semidesarrollada</div>
                                    <div class="bg-teal-50 p-4 rounded-xl border border-teal-100">
                                        <span class="text-2xl font-mono font-bold text-slate-800">CH₃-CH₂-OH</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- NUEVA SECCIÓN: NOTACIÓN DE LA APP -->
                        <div class="bg-indigo-50 p-6 rounded-2xl shadow-sm border border-indigo-200 mb-6 relative overflow-hidden">
                            <div class="absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-3 py-1 rounded-bl-lg uppercase tracking-wider">Usada en la App</div>
                            <h3 class="text-lg font-bold text-indigo-900 mb-4 border-b border-indigo-200 pb-2">2. Ramas con Paréntesis (Lineal)</h3>
                            <p class="text-sm text-indigo-800 mb-6">
                                En esta aplicación, para que las fórmulas se vean bien en una sola línea (como en un texto), escribimos las <strong>ramas o sustituyentes entre paréntesis</strong> justo después del carbono al que están unidas.
                            </p>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                                <!-- Columna Izquierda: Semidesarrollada Espacial -->
                                <div class="text-center">
                                    <div class="text-xs font-bold text-slate-400 uppercase mb-2">Semidesarrollada (Espacial)</div>
                                    <!-- SVG Metilpropano Ramificado -->
                                    <svg viewBox="0 0 200 120" class="mx-auto" width="180" height="100">
                                        <!-- Cadena principal -->
                                        <text x="40" y="55" font-family="monospace" font-weight="bold" font-size="20" text-anchor="middle">CH₃</text>
                                        <line x1="65" y1="50" x2="90" y2="50" stroke="#334155" stroke-width="2"/>
                                        <text x="110" y="55" font-family="monospace" font-weight="bold" font-size="20" text-anchor="middle">CH</text>
                                        <line x1="130" y1="50" x2="155" y2="50" stroke="#334155" stroke-width="2"/>
                                        <text x="180" y="55" font-family="monospace" font-weight="bold" font-size="20" text-anchor="middle">CH₃</text>
                                        
                                        <!-- Rama Abajo -->
                                        <line x1="110" y1="65" x2="110" y2="85" stroke="#334155" stroke-width="2"/>
                                        <text x="110" y="105" font-family="monospace" font-weight="bold" font-size="20" text-anchor="middle" fill="#dc2626">CH₃</text>
                                    </svg>
                                    <p class="text-xs text-slate-500 mt-1">La rama cuelga hacia abajo.</p>
                                </div>

                                <!-- Columna Derecha: Lineal con Paréntesis -->
                                <div class="text-center flex flex-col justify-center items-center">
                                    <div class="text-xs font-bold text-indigo-600 uppercase mb-2">Notación Lineal (App)</div>
                                    <div class="bg-white p-4 rounded-xl border-2 border-indigo-100 shadow-sm">
                                        <span class="text-xl font-mono font-bold text-slate-800">
                                            CH₃-CH<span class="text-red-600 font-black">(CH₃)</span>-CH₃
                                        </span>
                                    </div>
                                    <p class="text-xs text-indigo-700 mt-2 font-medium">
                                        El paréntesis <span class="font-mono text-red-600">(CH₃)</span> indica que ese grupo cuelga del carbono anterior (CH).
                                    </p>
                                </div>
                            </div>

                            <!-- Otro ejemplo rápido -->
                            <div class="mt-6 pt-4 border-t border-indigo-200">
                                <h4 class="text-sm font-bold text-indigo-900 mb-2">Otro ejemplo: Propan-2-ol</h4>
                                <div class="flex flex-col md:flex-row justify-center items-center gap-4 text-sm font-mono">
                                    <div class="text-slate-500">CH₃-CH(OH)-CH₃</div>
                                    <i class="fas fa-arrow-right text-indigo-400 rotate-90 md:rotate-0"></i>
                                    <div class="text-indigo-700">El grupo <strong>(OH)</strong> está unido al carbono central.</div>
                                </div>
                            </div>
                        </div>

                        <!-- SECCIÓN 3: ENTRENAMIENTO INTENSIVO (NUEVO) -->
                        <div class="mt-8 pt-6 border-t-2 border-indigo-100">
                            <h3 class="text-xl font-bold text-slate-800 mb-6 flex items-center">
                                <span class="bg-indigo-600 text-white w-8 h-8 rounded-lg flex items-center justify-center mr-3 text-sm">3</span>
                                Galería de Transformación: 10 Ejemplos Clave
                            </h3>
                            
                            <div class="grid grid-cols-1 gap-4">
                                
                                <!-- EJEMPLO 1: Doble rama igual (Neopentano) -->
                                <div class="bg-white p-4 rounded-xl border border-slate-200 flex flex-col md:flex-row items-center gap-4 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold shrink-0">1</div>
                                    <div class="flex-1 text-center md:text-left">
                                        <div class="text-xs font-bold text-slate-400 uppercase">Situación</div>
                                        <div class="text-slate-700 text-sm">Carbono con dos metilos (arriba y abajo)</div>
                                    </div>
                                    <div class="flex-1 flex flex-col items-center">
                                        <div class="text-xs text-slate-400 mb-1">Visual</div>
                                        <div class="font-mono text-xs leading-none text-center">
                                            CH₃<br>|<br>CH₃-C-CH₃<br>|<br>CH₃
                                        </div>
                                    </div>
                                    <div class="hidden md:block text-slate-300"><i class="fas fa-arrow-right"></i></div>
                                    <div class="flex-1 bg-indigo-50 p-3 rounded-lg border border-indigo-100 text-center">
                                        <div class="text-xs text-indigo-400 mb-1 font-bold uppercase">En la App</div>
                                        <div class="font-mono font-bold text-indigo-900">CH₃-C(CH₃)₂-CH₃</div>
                                    </div>
                                </div>

                                <!-- EJEMPLO 2: Ramas Mixtas (Haluro + Alquilo) -->
                                <div class="bg-white p-4 rounded-xl border border-slate-200 flex flex-col md:flex-row items-center gap-4 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold shrink-0">2</div>
                                    <div class="flex-1 text-center md:text-left">
                                        <div class="text-xs font-bold text-slate-400 uppercase">Situación</div>
                                        <div class="text-slate-700 text-sm">Un Bromo y un Metilo en el mismo carbono</div>
                                    </div>
                                    <div class="flex-1 flex flex-col items-center">
                                        <div class="text-xs text-slate-400 mb-1">Visual</div>
                                        <div class="font-mono text-xs leading-none text-center">
                                            Br<br>|<br>CH₃-C-CH₃<br>|<br>CH₃
                                        </div>
                                    </div>
                                    <div class="hidden md:block text-slate-300"><i class="fas fa-arrow-right"></i></div>
                                    <div class="flex-1 bg-indigo-50 p-3 rounded-lg border border-indigo-100 text-center">
                                        <div class="text-xs text-indigo-400 mb-1 font-bold uppercase">En la App</div>
                                        <div class="font-mono font-bold text-indigo-900">CH₃-C(Br)(CH₃)-CH₃</div>
                                    </div>
                                </div>

                                <!-- EJEMPLO 3: Alcohol Ramificado -->
                                <div class="bg-white p-4 rounded-xl border border-slate-200 flex flex-col md:flex-row items-center gap-4 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold shrink-0">3</div>
                                    <div class="flex-1 text-center md:text-left">
                                        <div class="text-xs font-bold text-slate-400 uppercase">Situación</div>
                                        <div class="text-slate-700 text-sm">Grupo -OH colgando del carbono central</div>
                                    </div>
                                    <div class="flex-1 flex flex-col items-center">
                                        <div class="text-xs text-slate-400 mb-1">Visual</div>
                                        <div class="font-mono text-xs leading-none text-center">
                                            OH<br>|<br>CH₃-CH-CH₃
                                        </div>
                                    </div>
                                    <div class="hidden md:block text-slate-300"><i class="fas fa-arrow-right"></i></div>
                                    <div class="flex-1 bg-indigo-50 p-3 rounded-lg border border-indigo-100 text-center">
                                        <div class="text-xs text-indigo-400 mb-1 font-bold uppercase">En la App</div>
                                        <div class="font-mono font-bold text-indigo-900">CH₃-CH(OH)-CH₃</div>
                                    </div>
                                </div>

                                <!-- EJEMPLO 4: Rama en Doble Enlace (Metilpropeno) -->
                                <div class="bg-white p-4 rounded-xl border border-slate-200 flex flex-col md:flex-row items-center gap-4 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold shrink-0">4</div>
                                    <div class="flex-1 text-center md:text-left">
                                        <div class="text-xs font-bold text-slate-400 uppercase">Situación</div>
                                        <div class="text-slate-700 text-sm">Metilo sobre un carbono con doble enlace</div>
                                    </div>
                                    <div class="flex-1 flex flex-col items-center">
                                        <div class="text-xs text-slate-400 mb-1">Visual</div>
                                        <div class="font-mono text-xs leading-none text-center">
                                            CH₃<br>|<br>CH₂=C-CH₃
                                        </div>
                                    </div>
                                    <div class="hidden md:block text-slate-300"><i class="fas fa-arrow-right"></i></div>
                                    <div class="flex-1 bg-indigo-50 p-3 rounded-lg border border-indigo-100 text-center">
                                        <div class="text-xs text-indigo-400 mb-1 font-bold uppercase">En la App</div>
                                        <div class="font-mono font-bold text-indigo-900">CH₂=C(CH₃)-CH₃</div>
                                    </div>
                                </div>

                                <!-- EJEMPLO 5: Aminoácido (Alanina) -->
                                <div class="bg-white p-4 rounded-xl border border-slate-200 flex flex-col md:flex-row items-center gap-4 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold shrink-0">5</div>
                                    <div class="flex-1 text-center md:text-left">
                                        <div class="text-xs font-bold text-slate-400 uppercase">Situación</div>
                                        <div class="text-slate-700 text-sm">Grupo Amino (-NH₂) como rama</div>
                                    </div>
                                    <div class="flex-1 flex flex-col items-center">
                                        <div class="text-xs text-slate-400 mb-1">Visual</div>
                                        <div class="font-mono text-xs leading-none text-center">
                                            NH₂<br>|<br>CH₃-CH-COOH
                                        </div>
                                    </div>
                                    <div class="hidden md:block text-slate-300"><i class="fas fa-arrow-right"></i></div>
                                    <div class="flex-1 bg-indigo-50 p-3 rounded-lg border border-indigo-100 text-center">
                                        <div class="text-xs text-indigo-400 mb-1 font-bold uppercase">En la App</div>
                                        <div class="font-mono font-bold text-indigo-900">CH₃-CH(NH₂)-COOH</div>
                                    </div>
                                </div>

                                <!-- EJEMPLO 6: Haluros Múltiples (3,3-dicloropentano) -->
                                <div class="bg-white p-4 rounded-xl border border-slate-200 flex flex-col md:flex-row items-center gap-4 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold shrink-0">6</div>
                                    <div class="flex-1 text-center md:text-left">
                                        <div class="text-xs font-bold text-slate-400 uppercase">Situación</div>
                                        <div class="text-slate-700 text-sm">Dos Cloros en el mismo carbono</div>
                                    </div>
                                    <div class="flex-1 flex flex-col items-center">
                                        <div class="text-xs text-slate-400 mb-1">Visual</div>
                                        <div class="font-mono text-xs leading-none text-center">
                                            Cl<br>|<br>Et-C-Et<br>|<br>Cl
                                        </div>
                                    </div>
                                    <div class="hidden md:block text-slate-300"><i class="fas fa-arrow-right"></i></div>
                                    <div class="flex-1 bg-indigo-50 p-3 rounded-lg border border-indigo-100 text-center">
                                        <div class="text-xs text-indigo-400 mb-1 font-bold uppercase">En la App</div>
                                        <div class="font-mono font-bold text-indigo-900">Et-C(Cl)₂-Et</div>
                                    </div>
                                </div>

                                <!-- EJEMPLO 7: Éter Ramificado (2-metoxipropano) -->
                                <div class="bg-white p-4 rounded-xl border border-slate-200 flex flex-col md:flex-row items-center gap-4 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold shrink-0">7</div>
                                    <div class="flex-1 text-center md:text-left">
                                        <div class="text-xs font-bold text-slate-400 uppercase">Situación</div>
                                        <div class="text-slate-700 text-sm">Grupo -OCH₃ colgando</div>
                                    </div>
                                    <div class="flex-1 flex flex-col items-center">
                                        <div class="text-xs text-slate-400 mb-1">Visual</div>
                                        <div class="font-mono text-xs leading-none text-center">
                                            OCH₃<br>|<br>CH₃-CH-CH₃
                                        </div>
                                    </div>
                                    <div class="hidden md:block text-slate-300"><i class="fas fa-arrow-right"></i></div>
                                    <div class="flex-1 bg-indigo-50 p-3 rounded-lg border border-indigo-100 text-center">
                                        <div class="text-xs text-indigo-400 mb-1 font-bold uppercase">En la App</div>
                                        <div class="font-mono font-bold text-indigo-900">CH₃-CH(OCH₃)-CH₃</div>
                                    </div>
                                </div>

                                <!-- EJEMPLO 8: Alcohol Terciario (2-metil-2-propanol) -->
                                <div class="bg-white p-4 rounded-xl border border-slate-200 flex flex-col md:flex-row items-center gap-4 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold shrink-0">8</div>
                                    <div class="flex-1 text-center md:text-left">
                                        <div class="text-xs font-bold text-slate-400 uppercase">Situación</div>
                                        <div class="text-slate-700 text-sm">Un -OH y un Metilo juntos</div>
                                    </div>
                                    <div class="flex-1 flex flex-col items-center">
                                        <div class="text-xs text-slate-400 mb-1">Visual</div>
                                        <div class="font-mono text-xs leading-none text-center">
                                            OH<br>|<br>CH₃-C-CH₃<br>|<br>CH₃
                                        </div>
                                    </div>
                                    <div class="hidden md:block text-slate-300"><i class="fas fa-arrow-right"></i></div>
                                    <div class="flex-1 bg-indigo-50 p-3 rounded-lg border border-indigo-100 text-center">
                                        <div class="text-xs text-indigo-400 mb-1 font-bold uppercase">En la App</div>
                                        <div class="font-mono font-bold text-indigo-900">CH₃-C(CH₃)(OH)-CH₃</div>
                                    </div>
                                </div>

                                <!-- EJEMPLO 9: Nitrocompuesto -->
                                <div class="bg-white p-4 rounded-xl border border-slate-200 flex flex-col md:flex-row items-center gap-4 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold shrink-0">9</div>
                                    <div class="flex-1 text-center md:text-left">
                                        <div class="text-xs font-bold text-slate-400 uppercase">Situación</div>
                                        <div class="text-slate-700 text-sm">Grupo Nitro (-NO₂) en cadena</div>
                                    </div>
                                    <div class="flex-1 flex flex-col items-center">
                                        <div class="text-xs text-slate-400 mb-1">Visual</div>
                                        <div class="font-mono text-xs leading-none text-center">
                                            NO₂<br>|<br>CH₃-CH-CH₃
                                        </div>
                                    </div>
                                    <div class="hidden md:block text-slate-300"><i class="fas fa-arrow-right"></i></div>
                                    <div class="flex-1 bg-indigo-50 p-3 rounded-lg border border-indigo-100 text-center">
                                        <div class="text-xs text-indigo-400 mb-1 font-bold uppercase">En la App</div>
                                        <div class="font-mono font-bold text-indigo-900">CH₃-CH(NO₂)-CH₃</div>
                                    </div>
                                </div>

                                <!-- EJEMPLO 10: Isooctano (Complejo) -->
                                <div class="bg-white p-4 rounded-xl border border-slate-200 flex flex-col md:flex-row items-center gap-4 shadow-sm hover:shadow-md transition-shadow">
                                    <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold shrink-0">10</div>
                                    <div class="flex-1 text-center md:text-left">
                                        <div class="text-xs font-bold text-slate-400 uppercase">Situación</div>
                                        <div class="text-slate-700 text-sm">Múltiples ramas en distintos carbonos</div>
                                    </div>
                                    <div class="flex-1 flex flex-col items-center">
                                        <div class="text-xs text-slate-400 mb-1">Visual</div>
                                        <div class="font-mono text-xs leading-none text-center whitespace-pre">
             CH₃   CH₃
             |    |
              CH₃-C-CH₂-CH-CH₃
        |
        CH₃
</div>
                                    </div>
                                    <div class="hidden md:block text-slate-300"><i class="fas fa-arrow-right"></i></div>
                                    <div class="flex-1 bg-indigo-50 p-3 rounded-lg border border-indigo-100 text-center">
                                        <div class="text-xs text-indigo-400 mb-1 font-bold uppercase">En la App</div>
                                        <div class="font-mono font-bold text-indigo-900 text-xs md:text-sm">CH₃-C(CH₃)₂-CH₂-CH(CH₃)₂</div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>

                    <div class="p-4 bg-white border-t border-slate-100 flex-shrink-0 z-20">
                        <button onclick="resetApp()" class="w-full bg-slate-800 text-white py-4 rounded-2xl font-bold hover:bg-slate-700 transition-colors shadow-lg">
                            <i class="fas fa-times mr-2"></i> Cerrar
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // --- HELPERS SVG ---
        function createBenzeneSVG(substituents, positions) {
            if (!Array.isArray(substituents)) substituents = [substituents];
            if (positions !== undefined && !Array.isArray(positions)) positions = [positions];
            if (positions === undefined) positions = [0];
            const cx = 100, cy = 100, r = 50;
            const points = [];
            for(let i=0; i<6; i++) {
                const angle = (60 * i - 90) * Math.PI / 180;
                points.push({ x: cx + r * Math.cos(angle), y: cy + r * Math.sin(angle), lx: cx + (r+25) * Math.cos(angle), ly: cy + (r+25) * Math.sin(angle) });
            }
            let pathD = `M${points[0].x},${points[0].y} `;
            for(let i=1; i<6; i++) pathD += `L${points[i].x},${points[i].y} `;
            pathD += "Z";
            const circle = `<circle cx="${cx}" cy="${cy}" r="${r*0.6}" class="svg-bond" style="stroke:#334155;stroke-width:2;fill:none;" />`;
            let subsSVG = "";
            if(substituents[0] !== '') {
                for(let i=0; i<substituents.length; i++) {
                    const posIndex = positions[i] % 6;
                    const pt = points[posIndex];
                    subsSVG += `<line x1="${pt.x}" y1="${pt.y}" x2="${pt.lx}" y2="${pt.ly}" class="svg-bond" style="stroke:#334155;stroke-width:2;" />`;
                    let anchor = "middle"; let baseline = "middle";
                    if (posIndex === 1 || posIndex === 2) anchor = "start";
                    if (posIndex === 4 || posIndex === 5) anchor = "end";
                    if (posIndex === 0) baseline = "auto"; if (posIndex === 3) baseline = "hanging";
                    subsSVG += `<text x="${pt.lx}" y="${pt.ly}" text-anchor="${anchor}" dominant-baseline="${baseline}" class="svg-text" style="font-family:'Roboto Mono';font-weight:bold;font-size:14px;fill:#1e293b;">${substituents[i]}</text>`;
                }
            }
            return `<svg viewBox="0 0 200 200" class="chem-structure" width="180" height="180"><path d="${pathD}" class="svg-bond" style="stroke:#334155;stroke-width:2;fill:white;"/>${circle}${subsSVG}</svg>`;
        }

        function createCycloSVG(sides, substituents, positions) {
            if (!Array.isArray(substituents)) substituents = [substituents];
            if (!Array.isArray(positions)) positions = [0];
            const cx = 100, cy = 100, r = 50;
            const points = [];
            const startAngle = -90; 
            for(let i=0; i<sides; i++) {
                const angle = (360/sides * i + startAngle) * Math.PI / 180;
                points.push({ x: cx + r * Math.cos(angle), y: cy + r * Math.sin(angle), lx: cx + (r+25) * Math.cos(angle), ly: cy + (r+25) * Math.sin(angle) });
            }
            let pathD = `M${points[0].x},${points[0].y} `;
            for(let i=1; i<sides; i++) pathD += `L${points[i].x},${points[i].y} `;
            pathD += "Z";
            let subsSVG = "";
            if(substituents.length > 0 && substituents[0] !== '') {
                for(let i=0; i<substituents.length; i++) {
                    const posIndex = positions[i] % sides;
                    const pt = points[posIndex];
                    subsSVG += `<line x1="${pt.x}" y1="${pt.y}" x2="${pt.lx}" y2="${pt.ly}" class="svg-bond" style="stroke:#334155;stroke-width:2;" />`;
                    let anchor = "middle"; let baseline = "middle";
                    if (pt.lx > cx + 10) anchor = "start"; if (pt.lx < cx - 10) anchor = "end"; if (pt.ly < cy - 10) baseline = "auto"; if (pt.ly > cy + 10) baseline = "hanging";
                    subsSVG += `<text x="${pt.lx}" y="${pt.ly}" text-anchor="${anchor}" dominant-baseline="${baseline}" class="svg-text" style="font-family:'Roboto Mono';font-weight:bold;font-size:14px;fill:#1e293b;">${substituents[i]}</text>`;
                }
            }
            return `<svg viewBox="0 0 200 200" class="chem-structure" width="180" height="180"><path d="${pathD}" class="svg-bond" style="stroke:#334155;stroke-width:2;fill:white;"/>${subsSVG}</svg>`;
        }

        // --- BASE DE DATOS MASIVA (+460 Compuestos) ---
        const DB = [
            // AROMÁTICOS (30)
            { id: 'aro_01', nombre: ['benceno'], formula: createBenzeneSVG(''), categoria: 'aromaticos' },
            { id: 'aro_02', nombre: ['metilbenceno', 'tolueno'], formula: createBenzeneSVG('CH₃', 0), categoria: 'aromaticos' },
            { id: 'aro_03', nombre: ['clorobenceno'], formula: createBenzeneSVG('Cl', 0), categoria: 'aromaticos' },
            { id: 'aro_04', nombre: ['nitrobenceno'], formula: createBenzeneSVG('NO₂', 0), categoria: 'aromaticos' },
            { id: 'aro_05', nombre: ['bromobenceno'], formula: createBenzeneSVG('Br', 0), categoria: 'aromaticos' },
            { id: 'aro_06', nombre: ['yodobenceno'], formula: createBenzeneSVG('I', 0), categoria: 'aromaticos' },
            { id: 'aro_07', nombre: ['fluorobenceno'], formula: createBenzeneSVG('F', 0), categoria: 'aromaticos' },
            { id: 'aro_08', nombre: ['etilbenceno'], formula: createBenzeneSVG('CH₂CH₃', 0), categoria: 'aromaticos' },
            { id: 'aro_09', nombre: ['propilbenceno'], formula: createBenzeneSVG('CH₂CH₂CH₃', 0), categoria: 'aromaticos' },
            { id: 'aro_10', nombre: ['isopropilbenceno', 'cumeno'], formula: createBenzeneSVG('CH(CH₃)₂', 0), categoria: 'aromaticos' },
            { id: 'aro_11', nombre: ['hidroxibenceno', 'fenol'], formula: createBenzeneSVG('OH', 0), categoria: 'aromaticos' },
            { id: 'aro_12', nombre: ['aminobenceno', 'anilina'], formula: createBenzeneSVG('NH₂', 0), categoria: 'aromaticos' },
            { id: 'aro_13', nombre: ['benzaldehido'], formula: createBenzeneSVG('CHO', 0), categoria: 'aromaticos' },
            { id: 'aro_14', nombre: ['acido benzoico'], formula: createBenzeneSVG('COOH', 0), categoria: 'aromaticos' },
            { id: 'aro_15', nombre: ['metoxibenceno', 'anisol'], formula: createBenzeneSVG('OCH₃', 0), categoria: 'aromaticos' },
            { id: 'aro_16', nombre: ['vinilbenceno', 'estireno'], formula: createBenzeneSVG('CH=CH₂', 0), categoria: 'aromaticos' },
            { id: 'aro_17', nombre: ['1,2-dimetilbenceno', 'o-xileno'], formula: createBenzeneSVG(['CH₃', 'CH₃'], [0, 1]), categoria: 'aromaticos' },
            { id: 'aro_18', nombre: ['1,3-dimetilbenceno', 'm-xileno'], formula: createBenzeneSVG(['CH₃', 'CH₃'], [0, 2]), categoria: 'aromaticos' },
            { id: 'aro_19', nombre: ['1,4-dimetilbenceno', 'p-xileno'], formula: createBenzeneSVG(['CH₃', 'CH₃'], [0, 3]), categoria: 'aromaticos' },
            { id: 'aro_20', nombre: ['1,3,5-trimetilbenceno', 'mesitileno'], formula: createBenzeneSVG(['CH₃', 'CH₃', 'CH₃'], [0, 2, 4]), categoria: 'aromaticos' },
            { id: 'aro_21', nombre: ['1,2,3-trimetilbenceno'], formula: createBenzeneSVG(['CH₃', 'CH₃', 'CH₃'], [0, 1, 2]), categoria: 'aromaticos' },
            { id: 'aro_22', nombre: ['1,2,4-trimetilbenceno'], formula: createBenzeneSVG(['CH₃', 'CH₃', 'CH₃'], [0, 1, 3]), categoria: 'aromaticos' },
            { id: 'aro_23', nombre: ['1-etil-2-metilbenceno'], formula: createBenzeneSVG(['Et', 'Me'], [0, 1]), categoria: 'aromaticos' },
            { id: 'aro_24', nombre: ['1-etil-3-metilbenceno'], formula: createBenzeneSVG(['Et', 'Me'], [0, 2]), categoria: 'aromaticos' },
            { id: 'aro_25', nombre: ['1-etil-4-metilbenceno'], formula: createBenzeneSVG(['Et', 'Me'], [0, 3]), categoria: 'aromaticos' },
            { id: 'aro_26', nombre: ['1,2-dietilbenceno'], formula: createBenzeneSVG(['Et', 'Et'], [0, 1]), categoria: 'aromaticos' },
            { id: 'aro_27', nombre: ['1,4-diclorobenceno'], formula: createBenzeneSVG(['Cl', 'Cl'], [0, 3]), categoria: 'aromaticos' },
            { id: 'aro_28', nombre: ['4-cloro-1,2-dimetilbenceno'], formula: createBenzeneSVG(['Me', 'Me', 'Cl'], [0, 1, 3]), categoria: 'aromaticos' },
            { id: 'aro_29', nombre: ['naftaleno'], formula: `<svg viewBox="0 0 160 100" class="chem-structure" width="160" height="100"><path d="M40,30 L70,30 L85,56 L70,82 L40,82 L25,56 Z M70,30 L100,30 L115,56 L100,82 L70,82" fill="none" stroke="#334155" stroke-width="2"/><circle cx="55" cy="56" r="10" fill="none" stroke="#334155" stroke-width="2"/><circle cx="95" cy="56" r="10" fill="none" stroke="#334155" stroke-width="2"/></svg>`, categoria: 'aromaticos' },
            { id: 'aro_30', nombre: ['antraceno'], formula: `<svg viewBox="0 0 200 100" class="chem-structure" width="200" height="100"><path d="M30,30 L60,30 L75,56 L60,82 L30,82 L15,56 Z M60,30 L90,30 L105,56 L90,82 L60,82 M90,30 L120,30 L135,56 L120,82 L90,82" fill="none" stroke="#334155" stroke-width="2"/><circle cx="45" cy="56" r="8" fill="none" stroke="#334155" stroke-width="2"/><circle cx="75" cy="56" r="8" fill="none" stroke="#334155" stroke-width="2"/><circle cx="105" cy="56" r="8" fill="none" stroke="#334155" stroke-width="2"/></svg>`, categoria: 'aromaticos' },

            // CICLOS (30)
            { id: 'cic_01', nombre: ['ciclopropano'], formula: createCycloSVG(3, []), categoria: 'ciclos' },
            { id: 'cic_02', nombre: ['ciclobutano'], formula: createCycloSVG(4, []), categoria: 'ciclos' },
            { id: 'cic_03', nombre: ['ciclopentano'], formula: createCycloSVG(5, []), categoria: 'ciclos' },
            { id: 'cic_04', nombre: ['ciclohexano'], formula: createCycloSVG(6, []), categoria: 'ciclos' },
            { id: 'cic_05', nombre: ['cicloheptano'], formula: createCycloSVG(7, []), categoria: 'ciclos' },
            { id: 'cic_06', nombre: ['metilciclopropano'], formula: createCycloSVG(3, ['CH₃'], [0]), categoria: 'ciclos' },
            { id: 'cic_07', nombre: ['metilciclobutano'], formula: createCycloSVG(4, ['CH₃'], [0]), categoria: 'ciclos' },
            { id: 'cic_08', nombre: ['metilciclopentano'], formula: createCycloSVG(5, ['CH₃'], [0]), categoria: 'ciclos' },
            { id: 'cic_09', nombre: ['metilciclohexano'], formula: createCycloSVG(6, ['CH₃'], [0]), categoria: 'ciclos' },
            { id: 'cic_10', nombre: ['etilciclohexano'], formula: createCycloSVG(6, ['Et'], [0]), categoria: 'ciclos' },
            { id: 'cic_11', nombre: ['propilciclohexano'], formula: createCycloSVG(6, ['Pr'], [0]), categoria: 'ciclos' },
            { id: 'cic_12', nombre: ['isopropilciclohexano'], formula: createCycloSVG(6, ['iPr'], [0]), categoria: 'ciclos' },
            { id: 'cic_13', nombre: ['1,1-dimetilciclopropano'], formula: createCycloSVG(3, ['Me', 'Me'], [0, 0]), categoria: 'ciclos' },
            { id: 'cic_14', nombre: ['1,2-dimetilciclopropano'], formula: createCycloSVG(3, ['Me', 'Me'], [0, 1]), categoria: 'ciclos' },
            { id: 'cic_15', nombre: ['1,1-dimetilciclohexano'], formula: createCycloSVG(6, ['Me', 'Me'], [0, 0]), categoria: 'ciclos' },
            { id: 'cic_16', nombre: ['1,2-dimetilciclohexano'], formula: createCycloSVG(6, ['Me', 'Me'], [0, 1]), categoria: 'ciclos' },
            { id: 'cic_17', nombre: ['1,3-dimetilciclohexano'], formula: createCycloSVG(6, ['Me', 'Me'], [0, 2]), categoria: 'ciclos' },
            { id: 'cic_18', nombre: ['1,4-dimetilciclohexano'], formula: createCycloSVG(6, ['Me', 'Me'], [0, 3]), categoria: 'ciclos' },
            { id: 'cic_19', nombre: ['1-etil-2-metilciclohexano'], formula: createCycloSVG(6, ['Et', 'Me'], [0, 1]), categoria: 'ciclos' },
            { id: 'cic_20', nombre: ['1-etil-3-metilciclopentano'], formula: createCycloSVG(5, ['Et', 'Me'], [0, 2]), categoria: 'ciclos' },
            { id: 'cic_21', nombre: ['ciclobuteno'], formula: `<svg viewBox="0 0 100 100" class="chem-structure" width="100" height="100"><rect x="25" y="25" width="50" height="50" fill="none" stroke="#334155" stroke-width="2"/><line x1="25" y1="35" x2="75" y2="35" stroke="#334155" stroke-width="2"/></svg>`, categoria: 'ciclos' },
            { id: 'cic_22', nombre: ['ciclopenteno'], formula: `<svg viewBox="0 0 100 100" class="chem-structure" width="100" height="100"><polygon points="50,15 90,45 75,90 25,90 10,45" fill="none" stroke="#334155" stroke-width="2"/><line x1="52" y1="25" x2="82" y2="47" stroke="#334155" stroke-width="2"/></svg>`, categoria: 'ciclos' },
            { id: 'cic_23', nombre: ['ciclohexeno'], formula: `<svg viewBox="0 0 100 120" class="chem-structure" width="100" height="120"><polygon points="50,20 90,40 90,80 50,100 10,80 10,40" fill="none" stroke="#334155" stroke-width="2"/><line x1="82" y1="44" x2="82" y2="76" stroke="#334155" stroke-width="2"/></svg>`, categoria: 'ciclos' },
            { id: 'cic_24', nombre: ['1-metilciclopenteno'], formula: `<svg viewBox="0 0 100 100" class="chem-structure" width="100" height="100"><polygon points="50,15 90,45 75,90 25,90 10,45" fill="none" stroke="#334155" stroke-width="2"/><line x1="52" y1="25" x2="82" y2="47" stroke="#334155" stroke-width="2"/><text x="50" y="10" text-anchor="middle" font-weight="bold">Me</text></svg>`, categoria: 'ciclos' },
            { id: 'cic_25', nombre: ['1,3-ciclohexadieno'], formula: `<svg viewBox="0 0 100 120" class="chem-structure" width="100" height="120"><polygon points="50,20 90,40 90,80 50,100 10,80 10,40" fill="none" stroke="#334155" stroke-width="2"/><line x1="82" y1="44" x2="82" y2="76" stroke="#334155" stroke-width="2"/><line x1="18" y1="44" x2="18" y2="76" stroke="#334155" stroke-width="2"/></svg>`, categoria: 'ciclos' },
            { id: 'cic_26', nombre: ['1,4-ciclohexadieno'], formula: 'C₆H₈ (1,4)', categoria: 'ciclos' },
            { id: 'cic_27', nombre: ['ciclopropilciclopentano'], formula: 'C₃H₅-C₅H₉', categoria: 'ciclos' },
            { id: 'cic_28', nombre: ['ciclohexilciclohexano'], formula: 'C₆H₁₁-C₆H₁₁', categoria: 'ciclos' },
            { id: 'cic_29', nombre: ['1-terc-butilciclohexano'], formula: createCycloSVG(6, ['tBu'], [0]), categoria: 'ciclos' },
            { id: 'cic_30', nombre: ['ciclopentadieno'], formula: 'C₅H₆', categoria: 'ciclos' },

            // ALCANOS (22) - Sin cambios, ya eran suficientes
            { id: 'alc_01', nombre: ['propano'], formula: 'CH₃-CH₂-CH₃', categoria: 'alcanos' },
            { id: 'alc_02', nombre: ['butano'], formula: 'CH₃-CH₂-CH₂-CH₃', categoria: 'alcanos' },
            { id: 'alc_03', nombre: ['pentano'], formula: 'CH₃-(CH₂)₃-CH₃', categoria: 'alcanos' },
            { id: 'alc_04', nombre: ['hexano'], formula: 'CH₃-(CH₂)₄-CH₃', categoria: 'alcanos' },
            { id: 'alc_05', nombre: ['heptano'], formula: 'CH₃-(CH₂)₅-CH₃', categoria: 'alcanos' },
            { id: 'alc_06', nombre: ['octano'], formula: 'CH₃-(CH₂)₆-CH₃', categoria: 'alcanos' },
            { id: 'alc_07', nombre: ['metilpropano', 'isobutano'], formula: 'CH₃-CH(CH₃)-CH₃', categoria: 'alcanos' },
            { id: 'alc_08', nombre: ['2-metilbutano', 'isopentano'], formula: 'CH₃-CH(CH₃)-CH₂-CH₃', categoria: 'alcanos' },
            { id: 'alc_09', nombre: ['2,2-dimetilpropano', 'neopentano'], formula: 'CH₃-C(CH₃)₂-CH₃', categoria: 'alcanos' },
            { id: 'alc_10', nombre: ['3-metilpentano'], formula: 'CH₃-CH₂-CH(CH₃)-CH₂-CH₃', categoria: 'alcanos' },
            { id: 'alc_11', nombre: ['2,3-dimetilbutano'], formula: 'CH₃-CH(CH₃)-CH(CH₃)-CH₃', categoria: 'alcanos' },
            { id: 'alc_12', nombre: ['2,2-dimetilbutano'], formula: 'CH₃-C(CH₃)₂-CH₂-CH₃', categoria: 'alcanos' },
            { id: 'alc_13', nombre: ['3-etilpentano'], formula: 'CH₃-CH₂-CH(CH₂CH₃)-CH₂-CH₃', categoria: 'alcanos' },
            { id: 'alc_14', nombre: ['2,4-dimetilpentano'], formula: 'CH₃-CH(CH₃)-CH₂-CH(CH₃)-CH₃', categoria: 'alcanos' },
            { id: 'alc_15', nombre: ['2,2,4-trimetilpentano', 'isooctano'], formula: 'CH₃-C(CH₃)₂-CH₂-CH(CH₃)₂', categoria: 'alcanos' },
            { id: 'alc_16', nombre: ['2,2,3-trimetilbutano'], formula: 'CH₃-C(CH₃)₂-CH(CH₃)-CH₃', categoria: 'alcanos' },
            { id: 'alc_17', nombre: ['4-etil-3-metilheptano'], formula: 'CH₃-CH₂-CH(CH₃)-CH(Et)-Pr', categoria: 'alcanos' },
            { id: 'alc_18', nombre: ['2,2,3,3-tetrametilbutano'], formula: 'CH₃-C(CH₃)₂-C(CH₃)₂-CH₃', categoria: 'alcanos' },
            { id: 'alc_19', nombre: ['3-metilhexano'], formula: 'CH₃-CH₂-CH(CH₃)-CH₂-CH₂-CH₃', categoria: 'alcanos' },
            { id: 'alc_20', nombre: ['3,3-dimetilhexano'], formula: 'CH₃-CH₂-C(CH₃)₂-CH₂-CH₂-CH₃', categoria: 'alcanos' },
            { id: 'alc_21', nombre: ['4-etilheptano'], formula: 'CH₃-CH₂-CH₂-CH(Et)-CH₂-CH₂-CH₃', categoria: 'alcanos' },
            { id: 'alc_22', nombre: ['2,3-dimetilpentano'], formula: 'CH₃-CH(CH₃)-CH(CH₃)-CH₂-CH₃', categoria: 'alcanos' },

            // HALOGENUROS (20)
            { id: 'hal_01', nombre: ['cloroetano'], formula: 'CH₃-CH₂-Cl', categoria: 'halogenuros' },
            { id: 'hal_02', nombre: ['1-cloropropano'], formula: 'CH₃-CH₂-CH₂-Cl', categoria: 'halogenuros' },
            { id: 'hal_03', nombre: ['2-cloropropano'], formula: 'CH₃-CH(Cl)-CH₃', categoria: 'halogenuros' },
            { id: 'hal_04', nombre: ['1,2-dicloroetano'], formula: 'CH₂Cl-CH₂Cl', categoria: 'halogenuros' },
            { id: 'hal_05', nombre: ['triclorometano', 'cloroformo'], formula: 'CHCl₃', categoria: 'halogenuros' },
            { id: 'hal_06', nombre: ['tetracloruro de carbono', 'tetraclorometano'], formula: 'CCl₄', categoria: 'halogenuros' },
            { id: 'hal_07', nombre: ['bromoetano'], formula: 'CH₃-CH₂-Br', categoria: 'halogenuros' },
            { id: 'hal_08', nombre: ['yodometano'], formula: 'CH₃-I', categoria: 'halogenuros' },
            { id: 'hal_09', nombre: ['fluoroetano'], formula: 'CH₃-CH₂-F', categoria: 'halogenuros' },
            { id: 'hal_10', nombre: ['1,1-dicloroetano'], formula: 'CH₃-CHCl₂', categoria: 'halogenuros' },
            { id: 'hal_11', nombre: ['diyodometano'], formula: 'CH₂I₂', categoria: 'halogenuros' },
            { id: 'hal_12', nombre: ['3-bromoprop-1-eno'], formula: 'CH₂=CH-CH₂-Br', categoria: 'halogenuros' },
            { id: 'hal_13', nombre: ['1-bromo-2-buteno'], formula: 'CH₃-CH=CH-CH₂-Br', categoria: 'halogenuros' },
            { id: 'hal_14', nombre: ['1-cloro-2,2-dimetilpropano'], formula: 'CH₃-C(CH₃)₂-CH₂-Cl', categoria: 'halogenuros' },
            { id: 'hal_15', nombre: ['1,2,3-tricloropropano'], formula: 'CH₂(Cl)-CH(Cl)-CH₂(Cl)', categoria: 'halogenuros' },
            { id: 'hal_16', nombre: ['1,2-dibromoetano'], formula: 'Br-CH₂-CH₂-Br', categoria: 'halogenuros' },
            { id: 'hal_17', nombre: ['3-cloroprop-1-ino'], formula: 'CH≡C-CH₂-Cl', categoria: 'halogenuros' },
            { id: 'hal_18', nombre: ['4-bromo-1-buteno'], formula: 'CH₂=CH-CH₂-CH₂-Br', categoria: 'halogenuros' },
            { id: 'hal_19', nombre: ['1,1,2,2-tetracloroetano'], formula: 'CHCl₂-CHCl₂', categoria: 'halogenuros' },
            { id: 'hal_20', nombre: ['(E)-1-clorobut-2-eno'], formula: 'CH₃-CH=CH-CH₂-Cl', categoria: 'halogenuros' },

            // ALQUENOS Y ALQUINOS (30)
            { id: 'ins_01', nombre: ['eteno'], formula: 'CH₂=CH₂', categoria: 'insaturados' },
            { id: 'ins_02', nombre: ['propeno'], formula: 'CH₃-CH=CH₂', categoria: 'insaturados' },
            { id: 'ins_03', nombre: ['but-1-eno'], formula: 'CH₃-CH₂-CH=CH₂', categoria: 'insaturados' },
            { id: 'ins_04', nombre: ['but-2-eno'], formula: 'CH₃-CH=CH-CH₃', categoria: 'insaturados' },
            { id: 'ins_05', nombre: ['metilpropeno'], formula: 'CH₂=C(CH₃)-CH₃', categoria: 'insaturados' },
            { id: 'ins_06', nombre: ['buta-1,3-dieno'], formula: 'CH₂=CH-CH=CH₂', categoria: 'insaturados' },
            { id: 'ins_07', nombre: ['2-metilbuta-1,3-dieno', 'isopreno'], formula: 'CH₂=C(CH₃)-CH=CH₂', categoria: 'insaturados' },
            { id: 'ins_08', nombre: ['etino', 'acetileno'], formula: 'CH≡CH', categoria: 'insaturados' },
            { id: 'ins_09', nombre: ['propino'], formula: 'CH₃-C≡CH', categoria: 'insaturados' },
            { id: 'ins_10', nombre: ['but-2-ino'], formula: 'CH₃-C≡C-CH₃', categoria: 'insaturados' },
            { id: 'ins_11', nombre: ['but-1-ino'], formula: 'CH₃-CH₂-C≡CH', categoria: 'insaturados' },
            { id: 'ins_12', nombre: ['but-1-en-3-ino'], formula: 'CH₂=CH-C≡CH', categoria: 'insaturados' },
            { id: 'ins_13', nombre: ['hexa-2,4-dieno'], formula: 'CH₃-CH=CH-CH=CH-CH₃', categoria: 'insaturados' },
            { id: 'ins_14', nombre: ['pent-3-en-1-ino'], formula: 'CH₃-CH=CH-C≡CH', categoria: 'insaturados' },
            { id: 'ins_15', nombre: ['propadieno', 'aleno'], formula: 'CH₂=C=CH₂', categoria: 'insaturados' },
            { id: 'ins_16', nombre: ['2-metilbut-2-eno'], formula: 'CH₃-CH=C(CH₃)-CH₃', categoria: 'insaturados' },
            { id: 'ins_17', nombre: ['2,3-dimetilbut-2-eno'], formula: 'CH₃-C(CH₃)=C(CH₃)-CH₃', categoria: 'insaturados' },
            { id: 'ins_18', nombre: ['penta-1,4-dieno'], formula: 'CH₂=CH-CH₂-CH=CH₂', categoria: 'insaturados' },
            { id: 'ins_19', nombre: ['3-metilbut-1-ino'], formula: 'CH≡C-CH(CH₃)-CH₃', categoria: 'insaturados' },
            { id: 'ins_20', nombre: ['4-metilpent-2-ino'], formula: 'CH₃-C≡C-CH(CH₃)₂', categoria: 'insaturados' },
            { id: 'ins_21', nombre: ['3-metilhex-3-eno'], formula: 'CH₃-CH₂-CH=C(CH₃)-CH₂-CH₃', categoria: 'insaturados' },
            { id: 'ins_22', nombre: ['hexa-1,5-diino'], formula: 'CH≡C-CH₂-CH₂-C≡CH', categoria: 'insaturados' },
            { id: 'ins_23', nombre: ['hexatrieno'], formula: 'CH₂=CH-CH=CH-CH=CH₂', categoria: 'insaturados' },
            { id: 'ins_24', nombre: ['2,3-dimetilbuta-1,3-dieno'], formula: 'CH₂=C(CH₃)-C(CH₃)=CH₂', categoria: 'insaturados' },
            { id: 'ins_25', nombre: ['1,3,5-hexatrieno'], formula: 'CH₂=CH-CH=CH-CH=CH₂', categoria: 'insaturados' },
            { id: 'ins_26', nombre: ['vinilacetileno'], formula: 'CH₂=CH-C≡CH', categoria: 'insaturados' },
            { id: 'ins_27', nombre: ['3-etil-1,4-pentadieno'], formula: 'CH₂=CH-CH(Et)-CH=CH₂', categoria: 'insaturados' },
            { id: 'ins_28', nombre: ['4,4-dimetil-1-pentino'], formula: 'HC≡C-CH₂-C(Me)₃', categoria: 'insaturados' },
            { id: 'ins_29', nombre: ['3-metil-1-butino'], formula: 'HC≡C-CH(Me)₂', categoria: 'insaturados' },
            { id: 'ins_30', nombre: ['oct-4-ino'], formula: 'Pr-C≡C-Pr', categoria: 'insaturados' },

            // ALCOHOLES (30)
            { id: 'alc_01', nombre: ['metanol'], formula: 'CH₃-OH', categoria: 'alcoholes' },
            { id: 'alc_02', nombre: ['etanol'], formula: 'CH₃-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_03', nombre: ['propan-1-ol'], formula: 'CH₃-CH₂-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_04', nombre: ['propan-2-ol', 'isopropanol'], formula: 'CH₃-CH(OH)-CH₃', categoria: 'alcoholes' },
            { id: 'alc_05', nombre: ['butan-1-ol'], formula: 'Bu-OH', categoria: 'alcoholes' },
            { id: 'alc_06', nombre: ['butan-2-ol'], formula: 'CH₃-CH(OH)-Et', categoria: 'alcoholes' },
            { id: 'alc_07', nombre: ['terc-butanol'], formula: 'CH₃-C(Me)(OH)-CH₃', categoria: 'alcoholes' },
            { id: 'alc_08', nombre: ['etano-1,2-diol', 'etilenglicol'], formula: 'HO-CH₂-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_09', nombre: ['propano-1,2,3-triol', 'glicerina'], formula: 'CH₂(OH)-CH(OH)-CH₂(OH)', categoria: 'alcoholes' },
            { id: 'alc_10', nombre: ['prop-2-en-1-ol', 'alcohol alilico'], formula: 'CH₂=CH-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_11', nombre: ['prop-2-in-1-ol'], formula: 'CH≡C-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_12', nombre: ['propano-1,3-diol'], formula: 'HO-CH₂-CH₂-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_13', nombre: ['pentan-3-ol'], formula: 'Et-CH(OH)-Et', categoria: 'alcoholes' },
            { id: 'alc_14', nombre: ['3,3-dimetilbutan-2-ol'], formula: 'CH₃-CH(OH)-C(Me)₃', categoria: 'alcoholes' },
            { id: 'alc_15', nombre: ['isobutanol'], formula: 'CH₃-CH(Me)-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_16', nombre: ['pentaeritritol'], formula: 'C(CH₂OH)₄', categoria: 'alcoholes' },
            { id: 'alc_17', nombre: ['but-3-en-1-ol'], formula: 'CH₂=CH-CH₂-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_18', nombre: ['but-3-in-2-ol'], formula: 'CH≡C-CH(OH)-CH₃', categoria: 'alcoholes' },
            { id: 'alc_19', nombre: ['2-cloroetanol'], formula: 'Cl-CH₂-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_20', nombre: ['3-bromo-1-propanol'], formula: 'Br-CH₂-CH₂-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_21', nombre: ['2-metilpropan-2-ol'], formula: 'C(Me)₃-OH', categoria: 'alcoholes' },
            { id: 'alc_22', nombre: ['ciclohexanol'], formula: createCycloSVG(6, ['OH'], [0]), categoria: 'alcoholes' },
            { id: 'alc_23', nombre: ['fenol'], formula: createBenzeneSVG('OH', 0), categoria: 'alcoholes' },
            { id: 'alc_24', nombre: ['3-metilbut-2-en-1-ol'], formula: 'CH₃-C(Me)=CH-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_25', nombre: ['hexan-1-ol'], formula: 'CH₃-(CH₂)₅-OH', categoria: 'alcoholes' },
            { id: 'alc_26', nombre: ['alcohol bencilico'], formula: 'Ph-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_27', nombre: ['2-feniletanol'], formula: 'Ph-CH₂-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_28', nombre: ['2,2-dimetil-1-propanol'], formula: 'tBu-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_29', nombre: ['ciclohexilmetanol'], formula: 'c-C₆H₁₁-CH₂-OH', categoria: 'alcoholes' },
            { id: 'alc_30', nombre: ['3-clorofenol'], formula: createBenzeneSVG(['OH', 'Cl'], [0, 2]), categoria: 'alcoholes' },

            // ÉTERES (20)
            { id: 'eter_01', nombre: ['metoximetano', 'dimetileter'], formula: 'CH₃-O-CH₃', categoria: 'eteres' },
            { id: 'eter_02', nombre: ['etoxietano', 'dietileter'], formula: 'Et-O-Et', categoria: 'eteres' },
            { id: 'eter_03', nombre: ['metoxietano', 'etilmetileter'], formula: 'CH₃-O-Et', categoria: 'eteres' },
            { id: 'eter_04', nombre: ['2-metoxipropano'], formula: 'CH₃-O-CH(Me)₂', categoria: 'eteres' },
            { id: 'eter_05', nombre: ['metoxibenceno', 'anisol'], formula: 'Ph-O-CH₃', categoria: 'eteres' },
            { id: 'eter_06', nombre: ['etoxieteno'], formula: 'Et-O-CH=CH₂', categoria: 'eteres' },
            { id: 'eter_07', nombre: ['divinileter'], formula: 'CH₂=CH-O-CH=CH₂', categoria: 'eteres' },
            { id: 'eter_08', nombre: ['1,2-dimetoxietano'], formula: 'CH₃-O-CH₂-CH₂-O-CH₃', categoria: 'eteres' },
            { id: 'eter_09', nombre: ['1-metoxipropano'], formula: 'CH₃-O-Pr', categoria: 'eteres' },
            { id: 'eter_10', nombre: ['2-etoxibutano'], formula: 'CH₃-CH₂-CH(Me)-O-Et', categoria: 'eteres' },
            { id: 'eter_11', nombre: ['1,2-dietoxietano'], formula: 'Et-O-CH₂-CH₂-O-Et', categoria: 'eteres' },
            { id: 'eter_12', nombre: ['MTBE'], formula: 'CH₃-O-tBu', categoria: 'eteres' },
            { id: 'eter_13', nombre: ['propoxipropano'], formula: 'Pr-O-Pr', categoria: 'eteres' },
            { id: 'eter_14', nombre: ['isopropoxiisopropano'], formula: 'iPr-O-iPr', categoria: 'eteres' },
            { id: 'eter_15', nombre: ['etoxibenceno'], formula: 'Ph-O-Et', categoria: 'eteres' },
            { id: 'eter_16', nombre: ['metoxipropano'], formula: 'CH₃-O-CH₂-CH₂-CH₃', categoria: 'eteres' },
            { id: 'eter_17', nombre: ['butoxibutano'], formula: 'Bu-O-Bu', categoria: 'eteres' },
            { id: 'eter_18', nombre: ['1-etoxipropano'], formula: 'Et-O-Pr', categoria: 'eteres' },
            { id: 'eter_19', nombre: ['2-etoxipropano'], formula: 'Et-O-iPr', categoria: 'eteres' },
            { id: 'eter_20', nombre: ['metoxiciclopentano'], formula: 'c-C₅H₉-O-CH₃', categoria: 'eteres' },

            // ALDEHÍDOS (30)
            { id: 'ald_01', nombre: ['metanal', 'formaldehido'], formula: 'HCHO', categoria: 'aldehidos' },
            { id: 'ald_02', nombre: ['etanal', 'acetaldehido'], formula: 'CH₃-CHO', categoria: 'aldehidos' },
            { id: 'ald_03', nombre: ['propanal'], formula: 'Et-CHO', categoria: 'aldehidos' },
            { id: 'ald_04', nombre: ['butanal'], formula: 'Pr-CHO', categoria: 'aldehidos' },
            { id: 'ald_05', nombre: ['metilpropanal'], formula: 'iPr-CHO', categoria: 'aldehidos' },
            { id: 'ald_06', nombre: ['benzaldehido'], formula: 'Ph-CHO', categoria: 'aldehidos' },
            { id: 'ald_07', nombre: ['etanodial'], formula: 'CHO-CHO', categoria: 'aldehidos' },
            { id: 'ald_08', nombre: ['propanodial'], formula: 'CHO-CH₂-CHO', categoria: 'aldehidos' },
            { id: 'ald_09', nombre: ['propenal', 'acroleina'], formula: 'CH₂=CH-CHO', categoria: 'aldehidos' },
            { id: 'ald_10', nombre: ['but-2-enal'], formula: 'CH₃-CH=CH-CHO', categoria: 'aldehidos' },
            { id: 'ald_11', nombre: ['butanodial'], formula: 'CHO-(CH₂)₂-CHO', categoria: 'aldehidos' },
            { id: 'ald_12', nombre: ['propinal'], formula: 'CH≡C-CHO', categoria: 'aldehidos' },
            { id: 'ald_13', nombre: ['3-metilbutanal'], formula: 'CH₃-CH(Me)-CH₂-CHO', categoria: 'aldehidos' },
            { id: 'ald_14', nombre: ['fenilacetaldehido'], formula: 'Ph-CH₂-CHO', categoria: 'aldehidos' },
            { id: 'ald_15', nombre: ['3-fenilpropanal'], formula: 'Ph-CH₂-CH₂-CHO', categoria: 'aldehidos' },
            { id: 'ald_16', nombre: ['2-hidroxipropanal'], formula: 'CH₃-CH(OH)-CHO', categoria: 'aldehidos' },
            { id: 'ald_17', nombre: ['3-hidroxibutanal'], formula: 'CH₃-CH(OH)-CH₂-CHO', categoria: 'aldehidos' },
            { id: 'ald_18', nombre: ['4-hidroxibenzaldehido'], formula: 'HO-C₆H₄-CHO (p)', categoria: 'aldehidos' },
            { id: 'ald_19', nombre: ['pentanal'], formula: 'Bu-CHO', categoria: 'aldehidos' },
            { id: 'ald_20', nombre: ['hexanal'], formula: 'CH₃-(CH₂)₄-CHO', categoria: 'aldehidos' },
            { id: 'ald_21', nombre: ['2-metilpentanal'], formula: 'CH₃-CH₂-CH₂-CH(Me)-CHO', categoria: 'aldehidos' },
            { id: 'ald_22', nombre: ['3,3-dimetilbutanal'], formula: 'tBu-CH₂-CHO', categoria: 'aldehidos' },
            { id: 'ald_23', nombre: ['ciclopentanocarbaldehido'], formula: 'c-C₅H₉-CHO', categoria: 'aldehidos' },
            { id: 'ald_24', nombre: ['ciclohexanocarbaldehido'], formula: 'c-C₆H₁₁-CHO', categoria: 'aldehidos' },
            { id: 'ald_25', nombre: ['2-cloroetanal'], formula: 'Cl-CH₂-CHO', categoria: 'aldehidos' },
            { id: 'ald_26', nombre: ['3-bromopropanal'], formula: 'Br-CH₂-CH₂-CHO', categoria: 'aldehidos' },
            { id: 'ald_27', nombre: ['2-butenal'], formula: 'CH₃-CH=CH-CHO', categoria: 'aldehidos' },
            { id: 'ald_28', nombre: ['3-metil-2-butenal'], formula: 'Me₂C=CH-CHO', categoria: 'aldehidos' },
            { id: 'ald_29', nombre: ['pentanodial'], formula: 'CHO-(CH₂)₃-CHO', categoria: 'aldehidos' },
            { id: 'ald_30', nombre: ['hexanodial'], formula: 'CHO-(CH₂)₄-CHO', categoria: 'aldehidos' },

            // CETONAS (30)
            { id: 'cet_01', nombre: ['propanona', 'acetona'], formula: 'CH₃-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_02', nombre: ['butanona'], formula: 'CH₃-CO-Et', categoria: 'cetonas' },
            { id: 'cet_03', nombre: ['pentan-2-ona'], formula: 'CH₃-CO-Pr', categoria: 'cetonas' },
            { id: 'cet_04', nombre: ['pentan-3-ona'], formula: 'Et-CO-Et', categoria: 'cetonas' },
            { id: 'cet_05', nombre: ['butanodiona', 'biacetilo'], formula: 'CH₃-CO-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_06', nombre: ['pentano-2,4-diona'], formula: 'CH₃-CO-CH₂-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_07', nombre: ['but-3-en-2-ona'], formula: 'CH₂=CH-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_08', nombre: ['acetofenona', 'feniletanona'], formula: 'Ph-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_09', nombre: ['3-metilbutan-2-ona'], formula: 'iPr-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_10', nombre: ['3,3-dimetilbutan-2-ona'], formula: 'tBu-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_11', nombre: ['4-metilpentan-2-ona'], formula: 'iBu-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_12', nombre: ['hexan-3-ona'], formula: 'Et-CO-Pr', categoria: 'cetonas' },
            { id: 'cet_13', nombre: ['benzofenona'], formula: 'Ph-CO-Ph', categoria: 'cetonas' },
            { id: 'cet_14', nombre: ['ciclohexanona'], formula: 'c-C₆H₁₀=O', categoria: 'cetonas' },
            { id: 'cet_15', nombre: ['ciclopentanona'], formula: 'c-C₅H₈=O', categoria: 'cetonas' },
            { id: 'cet_16', nombre: ['1-fenilpropan-2-ona'], formula: 'Ph-CH₂-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_17', nombre: ['1-hidroxipropan-2-ona'], formula: 'HO-CH₂-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_18', nombre: ['3-hidroxibutanona'], formula: 'CH₃-CH(OH)-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_19', nombre: ['4-hidroxi-4-metilpentan-2-ona'], formula: 'Me₂C(OH)-CH₂-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_20', nombre: ['hexan-2-ona'], formula: 'CH₃-CO-Bu', categoria: 'cetonas' },
            { id: 'cet_21', nombre: ['heptan-2-ona'], formula: 'CH₃-CO-Pentil', categoria: 'cetonas' },
            { id: 'cet_22', nombre: ['2,4-dimetilpentan-3-ona'], formula: 'iPr-CO-iPr', categoria: 'cetonas' },
            { id: 'cet_23', nombre: ['1-cloropropan-2-ona'], formula: 'Cl-CH₂-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_24', nombre: ['3-clorobutanona'], formula: 'CH₃-CH(Cl)-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_25', nombre: ['pent-4-en-2-ona'], formula: 'CH₂=CH-CH₂-CO-CH₃', categoria: 'cetonas' },
            { id: 'cet_26', nombre: ['3-metilciclohexanona'], formula: 'Me-c-C₆H₉=O', categoria: 'cetonas' },
            { id: 'cet_27', nombre: ['2-metilciclohexanona'], formula: 'Me-c-C₆H₉=O', categoria: 'cetonas' },
            { id: 'cet_28', nombre: ['difenilmetanona'], formula: 'Ph-CO-Ph', categoria: 'cetonas' },
            { id: 'cet_29', nombre: ['1,3-difenilpropan-2-ona'], formula: 'Ph-CH₂-CO-CH₂-Ph', categoria: 'cetonas' },
            { id: 'cet_30', nombre: ['hexano-2,5-diona'], formula: 'CH₃-CO-CH₂-CH₂-CO-CH₃', categoria: 'cetonas' },

            // ÁCIDOS (20)
            { id: 'aci_01', nombre: ['acido metanoico', 'acido formico'], formula: 'HCOOH', categoria: 'acidos' },
            { id: 'aci_02', nombre: ['acido etanoico', 'acido acetico'], formula: 'CH₃-COOH', categoria: 'acidos' },
            { id: 'aci_03', nombre: ['acido propanoico'], formula: 'Et-COOH', categoria: 'acidos' },
            { id: 'aci_04', nombre: ['acido butanoico', 'acido butirico'], formula: 'Pr-COOH', categoria: 'acidos' },
            { id: 'aci_05', nombre: ['acido etanodioico', 'acido oxalico'], formula: 'HOOC-COOH', categoria: 'acidos' },
            { id: 'aci_06', nombre: ['acido benzoico'], formula: 'Ph-COOH', categoria: 'acidos' },
            { id: 'aci_07', nombre: ['acido propenoico', 'acido acrilico'], formula: 'CH₂=CH-COOH', categoria: 'acidos' },
            { id: 'aci_08', nombre: ['acido butanodioico', 'acido succinico'], formula: 'HOOC-(CH₂)₂-COOH', categoria: 'acidos' },
            { id: 'aci_09', nombre: ['acido propanodioico', 'acido malonico'], formula: 'HOOC-CH₂-COOH', categoria: 'acidos' },
            { id: 'aci_10', nombre: ['acido 2-metilpropanoico'], formula: 'iPr-COOH', categoria: 'acidos' },
            { id: 'aci_11', nombre: ['acido hexanodioico', 'acido adipico'], formula: 'HOOC-(CH₂)₄-COOH', categoria: 'acidos' },
            { id: 'aci_12', nombre: ['acido but-2-enoico'], formula: 'CH₃-CH=CH-COOH', categoria: 'acidos' },
            { id: 'aci_13', nombre: ['acido propinoico'], formula: 'CH≡C-COOH', categoria: 'acidos' },
            { id: 'aci_14', nombre: ['acido trifluoroetanoico'], formula: 'CF₃-COOH', categoria: 'acidos' },
            { id: 'aci_15', nombre: ['acido 2-metilbutanodioico'], formula: 'HOOC-CH(Me)-CH₂-COOH', categoria: 'acidos' },
            { id: 'aci_16', nombre: ['acido 2-hidroxipropanoico'], formula: 'CH₃-CH(OH)-COOH', categoria: 'acidos' },
            { id: 'aci_17', nombre: ['acido 3-oxobutanoico'], formula: 'CH₃-CO-CH₂-COOH', categoria: 'acidos' },
            { id: 'aci_18', nombre: ['acido cloroetanoico'], formula: 'Cl-CH₂-COOH', categoria: 'acidos' },
            { id: 'aci_19', nombre: ['acido 2-aminopropanoico'], formula: 'CH₃-CH(NH₂)-COOH', categoria: 'acidos' },
            { id: 'aci_20', nombre: ['acido 3-hidroxibutanoico'], formula: 'CH₃-CH(OH)-CH₂-COOH', categoria: 'acidos' },

            // ÉSTERES (15) - Se dejan como estaban
            { id: 'est_01', nombre: ['metanoato de metilo'], formula: 'HCOOCH₃', categoria: 'esteres' },
            { id: 'est_02', nombre: ['etanoato de metilo'], formula: 'CH₃-COO-CH₃', categoria: 'esteres' },
            { id: 'est_03', nombre: ['etanoato de etilo'], formula: 'CH₃-COO-CH₂CH₃', categoria: 'esteres' },
            { id: 'est_04', nombre: ['metanoato de etilo'], formula: 'HCOOCH₂CH₃', categoria: 'esteres' },
            { id: 'est_05', nombre: ['benzoato de metilo'], formula: 'Ph-COO-CH₃', categoria: 'esteres' },
            { id: 'est_06', nombre: ['etanoato de vinilo'], formula: 'CH₃-COO-CH=CH₂', categoria: 'esteres' },
            { id: 'est_07', nombre: ['etanoato de sodio'], formula: 'CH₃-COO-Na', categoria: 'esteres' },
            { id: 'est_08', nombre: ['propanoato de metilo'], formula: 'CH₃-CH₂-COO-CH₃', categoria: 'esteres' },
            { id: 'est_09', nombre: ['metanoato de potasio'], formula: 'H-COO-K', categoria: 'esteres' },
            { id: 'est_10', nombre: ['propanoato de etilo'], formula: 'CH₃-CH₂-COO-Et', categoria: 'esteres' },
            { id: 'est_11', nombre: ['2-metilpropenoato de metilo'], formula: 'CH₂=C(Me)-COO-Me', categoria: 'esteres' },
            { id: 'est_12', nombre: ['etanoato de isopropilo'], formula: 'CH₃-COO-iPr', categoria: 'esteres' },
            { id: 'est_13', nombre: ['propanodioato de dimetilo'], formula: 'Me-OOC-CH₂-COO-Me', categoria: 'esteres' },
            { id: 'est_14', nombre: ['butanoato de etilo'], formula: 'Pr-COO-Et', categoria: 'esteres' },
            { id: 'est_15', nombre: ['etanoato de terc-butilo'], formula: 'CH₃-COO-tBu', categoria: 'esteres' },

            // AMINAS (30)
            { id: 'amn_01', nombre: ['metanamina'], formula: 'CH₃-NH₂', categoria: 'aminas' },
            { id: 'amn_02', nombre: ['etanamina'], formula: 'Et-NH₂', categoria: 'aminas' },
            { id: 'amn_03', nombre: ['dimetilamina'], formula: 'Me-NH-Me', categoria: 'aminas' },
            { id: 'amn_04', nombre: ['trimetilamina'], formula: 'N(Me)₃', categoria: 'aminas' },
            { id: 'amn_05', nombre: ['anilina'], formula: 'Ph-NH₂', categoria: 'aminas' },
            { id: 'amn_06', nombre: ['etilenodiamina'], formula: 'NH₂-CH₂-CH₂-NH₂', categoria: 'aminas' },
            { id: 'amn_07', nombre: ['isopropilamina'], formula: 'iPr-NH₂', categoria: 'aminas' },
            { id: 'amn_08', nombre: ['putrescina'], formula: 'NH₂-(CH₂)₄-NH₂', categoria: 'aminas' },
            { id: 'amn_09', nombre: ['propan-1-amina'], formula: 'Pr-NH₂', categoria: 'aminas' },
            { id: 'amn_10', nombre: ['dietilamina'], formula: 'Et-NH-Et', categoria: 'aminas' },
            { id: 'amn_11', nombre: ['N-metiletanamina'], formula: 'Et-NH-Me', categoria: 'aminas' },
            { id: 'amn_12', nombre: ['sec-butilamina'], formula: 'sBu-NH₂', categoria: 'aminas' },
            { id: 'amn_13', nombre: ['terc-butilamina'], formula: 'tBu-NH₂', categoria: 'aminas' },
            { id: 'amn_14', nombre: ['N-etilanilina'], formula: 'Ph-NH-Et', categoria: 'aminas' },
            { id: 'amn_15', nombre: ['N,N-dimetilanilina'], formula: 'Ph-N(Me)₂', categoria: 'aminas' },
            { id: 'amn_16', nombre: ['trietilamina'], formula: 'N(Et)₃', categoria: 'aminas' },
            { id: 'amn_17', nombre: ['bencilamina'], formula: 'Ph-CH₂-NH₂', categoria: 'aminas' },
            { id: 'amn_18', nombre: ['ciclohexilamina'], formula: 'c-C₆H₁₁-NH₂', categoria: 'aminas' },
            { id: 'amn_19', nombre: ['difenilamina'], formula: 'Ph-NH-Ph', categoria: 'aminas' },
            { id: 'amn_20', nombre: ['N-metilpropan-1-amina'], formula: 'Pr-NH-Me', categoria: 'aminas' },
            { id: 'amn_21', nombre: ['N-etil-N-metiletanamina'], formula: 'Et-N(Me)-Et', categoria: 'aminas' },
            { id: 'amn_22', nombre: ['1,3-propanodiamina'], formula: 'NH₂-(CH₂)₃-NH₂', categoria: 'aminas' },
            { id: 'amn_23', nombre: ['N-propilpropan-1-amina'], formula: 'Pr-NH-Pr', categoria: 'aminas' },
            { id: 'amn_24', nombre: ['alilamina'], formula: 'CH₂=CH-CH₂-NH₂', categoria: 'aminas' },
            { id: 'amn_25', nombre: ['2-cloroetilamina'], formula: 'Cl-CH₂-CH₂-NH₂', categoria: 'aminas' },
            { id: 'amn_26', nombre: ['etanolamina'], formula: 'HO-CH₂-CH₂-NH₂', categoria: 'aminas' },
            { id: 'amn_27', nombre: ['N-isopropil-N-metilamina'], formula: 'iPr-N(H)Me', categoria: 'aminas' },
            { id: 'amn_28', nombre: ['N,N-dimetilpropan-1-amina'], formula: 'Pr-N(Me)₂', categoria: 'aminas' },
            { id: 'amn_29', nombre: ['p-toluidina'], formula: 'Me-C₆H₄-NH₂', categoria: 'aminas' },
            { id: 'amn_30', nombre: ['hexan-1,6-diamina'], formula: 'NH₂-(CH₂)₆-NH₂', categoria: 'aminas' },

            // AMIDAS (30)
            { id: 'amd_01', nombre: ['acetamida'], formula: 'CH₃-CONH₂', categoria: 'amidas' },
            { id: 'amd_02', nombre: ['formamida'], formula: 'H-CONH₂', categoria: 'amidas' },
            { id: 'amd_03', nombre: ['propanamida'], formula: 'Et-CONH₂', categoria: 'amidas' },
            { id: 'amd_04', nombre: ['N-metilacetamida'], formula: 'CH₃-CONH-Me', categoria: 'amidas' },
            { id: 'amd_05', nombre: ['N,N-dimetilformamida'], formula: 'H-CON(Me)₂', categoria: 'amidas' },
            { id: 'amd_06', nombre: ['acrilamida'], formula: 'CH₂=CH-CONH₂', categoria: 'amidas' },
            { id: 'amd_07', nombre: ['urea'], formula: 'NH₂-CO-NH₂', categoria: 'amidas' },
            { id: 'amd_08', nombre: ['propano-1,3-diamida'], formula: 'NH₂-CO-CH₂-CONH₂', categoria: 'amidas' },
            { id: 'amd_09', nombre: ['acetanilida'], formula: 'CH₃-CONH-Ph', categoria: 'amidas' },
            { id: 'amd_10', nombre: ['2-metilpropanamida'], formula: 'iPr-CONH₂', categoria: 'amidas' },
            { id: 'amd_11', nombre: ['benzamida'], formula: 'Ph-CONH₂', categoria: 'amidas' },
            { id: 'amd_12', nombre: ['butanamida'], formula: 'Pr-CONH₂', categoria: 'amidas' },
            { id: 'amd_13', nombre: ['pentanamida'], formula: 'Bu-CONH₂', categoria: 'amidas' },
            { id: 'amd_14', nombre: ['hexanamida'], formula: 'Pentil-CONH₂', categoria: 'amidas' },
            { id: 'amd_15', nombre: ['N-etilpropanamida'], formula: 'Et-CONH-Et', categoria: 'amidas' },
            { id: 'amd_16', nombre: ['N,N-dietilacetamida'], formula: 'CH₃-CON(Et)₂', categoria: 'amidas' },
            { id: 'amd_17', nombre: ['2-cloroacetamida'], formula: 'Cl-CH₂-CONH₂', categoria: 'amidas' },
            { id: 'amd_18', nombre: ['3-hidroxibutanamida'], formula: 'CH₃-CH(OH)-CH₂-CONH₂', categoria: 'amidas' },
            { id: 'amd_19', nombre: ['etano-1,2-diamida'], formula: 'NH₂-CO-CO-NH₂', categoria: 'amidas' },
            { id: 'amd_20', nombre: ['butano-1,4-diamida'], formula: 'NH₂-CO-(CH₂)₂-CONH₂', categoria: 'amidas' },
            { id: 'amd_21', nombre: ['hexano-1,6-diamida'], formula: 'NH₂-CO-(CH₂)₄-CONH₂', categoria: 'amidas' },
            { id: 'amd_22', nombre: ['N-fenilbenzamida'], formula: 'Ph-CONH-Ph', categoria: 'amidas' },
            { id: 'amd_23', nombre: ['2-metilbutanamida'], formula: 'sBu-CONH₂', categoria: 'amidas' },
            { id: 'amd_24', nombre: ['3-metilbutanamida'], formula: 'iBu-CONH₂', categoria: 'amidas' },
            { id: 'amd_25', nombre: ['N-metilformamida'], formula: 'H-CONH-Me', categoria: 'amidas' },
            { id: 'amd_26', nombre: ['N-etilformamida'], formula: 'H-CONH-Et', categoria: 'amidas' },
            { id: 'amd_27', nombre: ['N,N-dimetilacetamida'], formula: 'CH₃-CON(Me)₂', categoria: 'amidas' },
            { id: 'amd_28', nombre: ['N-propilacetamida'], formula: 'CH₃-CONH-Pr', categoria: 'amidas' },
            { id: 'amd_29', nombre: ['2-fenilacetamida'], formula: 'Ph-CH₂-CONH₂', categoria: 'amidas' },
            { id: 'amd_30', nombre: ['piridina-3-carboxamida'], formula: 'C₅H₄N-CO-NH₂', categoria: 'amidas' },

            // NITRILOS (20)
            { id: 'nn_01', nombre: ['acetonitrilo'], formula: 'CH₃-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_02', nombre: ['propanonitrilo'], formula: 'Et-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_03', nombre: ['butanonitrilo'], formula: 'Pr-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_04', nombre: ['propenonitrilo'], formula: 'CH₂=CH-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_05', nombre: ['propanodinitrilo'], formula: 'NC-CH₂-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_06', nombre: ['nitrometano'], formula: 'CH₃-NO₂', categoria: 'nitrilos_nitro' },
            { id: 'nn_07', nombre: ['nitroetano'], formula: 'Et-NO₂', categoria: 'nitrilos_nitro' },
            { id: 'nn_08', nombre: ['2-nitropropano'], formula: 'iPr-NO₂', categoria: 'nitrilos_nitro' },
            { id: 'nn_09', nombre: ['tetranitrometano'], formula: 'C(NO₂)₄', categoria: 'nitrilos_nitro' },
            { id: 'nn_10', nombre: ['2-nitropropano'], formula: 'iPr-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_11', nombre: ['hexanodinitrilo'], formula: 'NC-(CH₂)₄-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_12', nombre: ['benzonitrilo'], formula: 'Ph-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_13', nombre: ['pentanonitrilo'], formula: 'Bu-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_14', nombre: ['hexanonitrilo'], formula: 'Pentil-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_15', nombre: ['3-metilbutanonitrilo'], formula: 'iBu-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_16', nombre: ['cianuro de vinilo'], formula: 'CH₂=CH-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_17', nombre: ['butanodinitrilo'], formula: 'NC-CH₂-CH₂-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_18', nombre: ['1-nitropropano'], formula: 'Pr-NO₂', categoria: 'nitrilos_nitro' },
            { id: 'nn_19', nombre: ['fenilacetonitrilo'], formula: 'Ph-CH₂-CN', categoria: 'nitrilos_nitro' },
            { id: 'nn_20', nombre: ['2-cloroacetonitrilo'], formula: 'Cl-CH₂-CN', categoria: 'nitrilos_nitro' },

            // MEZCLA (EXPERTO) - 111 del archivo original (Se mantiene igual, resumido aquí para brevedad)
            { id: 'mix_01', nombre: ['acido 3-hidroxipropanoico'], formula: 'CH₂(OH)-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_02', nombre: ['acido 3-oxobutanoico'], formula: 'CH₃-CO-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_03', nombre: ['acido 3-oxopropanoico'], formula: 'CHO-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_04', nombre: ['prop-2-en-1-ol'], formula: 'CH₂=CH-CH₂-OH', categoria: 'mezcla' },
            { id: 'mix_05', nombre: ['propenal'], formula: 'CH₂=CH-CHO', categoria: 'mezcla' },
            { id: 'mix_06', nombre: ['3-oxobutanonitrilo'], formula: 'CH₃-CO-CH₂-CN', categoria: 'mezcla' },
            { id: 'mix_07', nombre: ['2-aminoetanol'], formula: 'NH₂-CH₂-CH₂-OH', categoria: 'mezcla' },
            { id: 'mix_08', nombre: ['acido cloroetanoico'], formula: 'Cl-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_09', nombre: ['2-hidroxipropanonitrilo'], formula: 'CH₃-CH(OH)-CN', categoria: 'mezcla' },
            { id: 'mix_10', nombre: ['acido 3-amino-3-oxopropanoico'], formula: 'HOOC-CH₂-CONH₂', categoria: 'mezcla' },
            { id: 'mix_11', nombre: ['acido propenoico'], formula: 'CH₂=CH-COOH', categoria: 'mezcla' },
            { id: 'mix_12', nombre: ['2-cloropropanal'], formula: 'CH₃-CH(Cl)-CHO', categoria: 'mezcla' },
            { id: 'mix_13', nombre: ['2-aminopropan-1-ol'], formula: 'CH₃-CH(NH₂)-CH₂-OH', categoria: 'mezcla' },
            { id: 'mix_14', nombre: ['acido 2-hidroxibutanodioico'], formula: 'HOOC-CH₂-CH(OH)-COOH', categoria: 'mezcla' },
            { id: 'mix_15', nombre: ['propenonitrilo'], formula: 'CH₂=CH-CN', categoria: 'mezcla' },
            { id: 'mix_16', nombre: ['prop-2-in-1-ol'], formula: 'HC≡C-CH₂-OH', categoria: 'mezcla' },
            { id: 'mix_17', nombre: ['but-3-en-2-ona'], formula: 'CH₃-CO-CH=CH₂', categoria: 'mezcla' },
            { id: 'mix_18', nombre: ['2-metilpropenoato de etilo'], formula: 'CH₂=C(CH₃)-COO-CH₂-CH₃', categoria: 'mezcla' },
            { id: 'mix_19', nombre: ['3-metilpentano-2,4-diona'], formula: 'CH₃-CO-CH(CH₃)-CO-CH₃', categoria: 'mezcla' },
            { id: 'mix_20', nombre: ['1,2-dibromoetano'], formula: 'Br-CH₂-CH₂-Br', categoria: 'mezcla' },
            { id: 'mix_21', nombre: ['dimetilsulfuro'], formula: 'CH₃-S-CH₃', categoria: 'mezcla' },
            { id: 'mix_22', nombre: ['anhidrido etanoico'], formula: 'CH₃-C(O)-O-C(O)-CH₃', categoria: 'mezcla' },
            { id: 'mix_23', nombre: ['2,3,4-trihidroxibutanal'], formula: 'CHO-CH(OH)-CH(OH)-CH₂-OH', categoria: 'mezcla' },
            { id: 'mix_24', nombre: ['acido 2-oxopropanoico'], formula: 'CH₃-CO-COOH', categoria: 'mezcla' },
            { id: 'mix_25', nombre: ['acido 2-aminopropanoico', 'alanina'], formula: 'CH₃-CH(NH₂)-COOH', categoria: 'mezcla' },
            { id: 'mix_26', nombre: ['2-hidroxipropanamida'], formula: 'CH₃-CH(OH)-CONH₂', categoria: 'mezcla' },
            { id: 'mix_27', nombre: ['acido 2-metoxipropanoico'], formula: 'CH₃-CH(OCH₃)-COOH', categoria: 'mezcla' },
            { id: 'mix_28', nombre: ['4-hidroxibutan-2-ona'], formula: 'CH₃-CO-CH₂-CH₂-OH', categoria: 'mezcla' },
            { id: 'mix_29', nombre: ['acido 2,3-dihidroxibutanodioico'], formula: 'HOOC-CH(OH)-CH(OH)-COOH', categoria: 'mezcla' },
            { id: 'mix_30', nombre: ['acido 2-nitropropanoico'], formula: 'CH₃-CH(NO₂)-COOH', categoria: 'mezcla' },
            { id: 'mix_31', nombre: ['1,2-dicloroetano'], formula: 'CH₂(Cl)-CH₂(Cl)', categoria: 'mezcla' },
            { id: 'mix_32', nombre: ['1,1-dicloroetano'], formula: 'CH₃-CHCl₂', categoria: 'mezcla' },
            { id: 'mix_33', nombre: ['diyodometano'], formula: 'CH₂I₂', categoria: 'mezcla' },
            { id: 'mix_34', nombre: ['fluoroetano'], formula: 'CH₃-CH₂-F', categoria: 'mezcla' },
            { id: 'mix_35', nombre: ['but-3-in-2-ol'], formula: 'CH≡C-CH(OH)-CH₃', categoria: 'mezcla' },
            { id: 'mix_36', nombre: ['acido 3-aminobutanoico'], formula: 'CH₃-CH(NH₂)-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_37', nombre: ['acido 4-amino-4-oxobutanoico'], formula: 'NH₂-CO-CH₂-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_38', nombre: ['1-metoxipropan-2-ol'], formula: 'CH₃-O-CH₂-CH(OH)-CH₃', categoria: 'mezcla' },
            { id: 'mix_39', nombre: ['3-bromoprop-1-eno'], formula: 'CH₂=CH-CH₂-Br', categoria: 'mezcla' },
            { id: 'mix_40', nombre: ['acido trifluoroetanoico'], formula: 'CF₃-COOH', categoria: 'mezcla' },
            { id: 'mix_41', nombre: ['propano-2-tiol'], formula: 'CH₃-CH(SH)-CH₃', categoria: 'mezcla' },
            { id: 'mix_42', nombre: ['etanotiol'], formula: 'CH₃-CH₂-SH', categoria: 'mezcla' },
            { id: 'mix_43', nombre: ['3-cloropropano-1,2-diol'], formula: 'OH-CH₂-CH(OH)-CH₂-Cl', categoria: 'mezcla' },
            { id: 'mix_44', nombre: ['but-2-enonitrilo'], formula: 'CH₃-CH=CH-CN', categoria: 'mezcla' },
            { id: 'mix_45', nombre: ['but-2-inoato de metilo'], formula: 'CH₃-C≡C-COO-CH₃', categoria: 'mezcla' },
            { id: 'mix_46', nombre: ['etenoxieteno'], formula: 'CH₂=CH-O-CH=CH₂', categoria: 'mezcla' },
            { id: 'mix_47', nombre: ['acido 2-amino-3-metilbutanoico'], formula: 'CH₃-CH(CH₃)-CH(NH₂)-COOH', categoria: 'mezcla' },
            { id: 'mix_48', nombre: ['acido 2-amino-3-hidroxipropanoico'], formula: 'HO-CH₂-CH(NH₂)-COOH', categoria: 'mezcla' },
            { id: 'mix_49', nombre: ['cisteina'], formula: 'HS-CH₂-CH(NH₂)-COOH', categoria: 'mezcla' },
            { id: 'mix_50', nombre: ['3-oxobutanoato de etilo'], formula: 'CH₃-CO-CH₂-CO-O-CH₂-CH₃', categoria: 'mezcla' },
            { id: 'mix_51', nombre: ['anhidrido metanoico'], formula: 'H-C(O)-O-C(O)-H', categoria: 'mezcla' },
            { id: 'mix_52', nombre: ['anhidrido propanoico'], formula: 'CH₃-CH₂-C(O)-O-C(O)-CH₂-CH₃', categoria: 'mezcla' },
            { id: 'mix_53', nombre: ['etanoato de isobutilo'], formula: 'CH₃-COO-CH₂-CH(CH₃)₂', categoria: 'mezcla' },
            { id: 'mix_54', nombre: ['1-cloro-2,2-dimetilpropano'], formula: 'CH₃-C(CH₃)₂-CH₂-Cl', categoria: 'mezcla' },
            { id: 'mix_55', nombre: ['buta-1,2-dieno'], formula: 'CH₃-CH=C=CH₂', categoria: 'mezcla' },
            { id: 'mix_56', nombre: ['1-isopropoxipropano'], formula: 'CH₃-CH(CH₃)-O-CH₂-CH₂-CH₃', categoria: 'mezcla' },
            { id: 'mix_57', nombre: ['2,3,4,5,6-pentahidroxiexanal'], formula: 'CH₂(OH)-CH(OH)-CH(OH)-CH(OH)-CH(OH)-CHO', categoria: 'mezcla' },
            { id: 'mix_58', nombre: ['acido 4-oxopentanoico'], formula: 'CH₃-CO-CH₂-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_59', nombre: ['acido 2-hidroxipropanoico'], formula: 'CH₃-CH(OH)-COOH', categoria: 'mezcla' },
            { id: 'mix_60', nombre: ['acido 2-metilpropenoico'], formula: 'CH₂=C(CH₃)-COOH', categoria: 'mezcla' },
            { id: 'mix_61', nombre: ['acido propano-1,2,3-tricarboxilico'], formula: 'HOOC-CH₂-CH(COOH)-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_62', nombre: ['3-oxobutanoato de etilo'], formula: 'CH₃-CO-CH₂-COO-CH₂-CH₃', categoria: 'mezcla' },
            { id: 'mix_63', nombre: ['propenoato de etenilo'], formula: 'CH₂=CH-COO-CH=CH₂', categoria: 'mezcla' },
            { id: 'mix_64', nombre: ['acido 2-amino-3-hidroxibutanoico'], formula: 'CH₃-CH(OH)-CH(NH₂)-COOH', categoria: 'mezcla' },
            { id: 'mix_65', nombre: ['acido 4-oxobutanoico'], formula: 'OHC-CH₂-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_66', nombre: ['acido metoxietanoico'], formula: 'CH₃-O-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_67', nombre: ['2-(metilamino)etanol'], formula: 'CH₃-NH-CH₂-CH₂-OH', categoria: 'mezcla' },
            { id: 'mix_68', nombre: ['acido 4-aminobutanoico'], formula: 'H₂N-CH₂-CH₂-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_69', nombre: ['2-bromo-3-clorobutanal'], formula: 'CH₃-CH(Cl)-CH(Br)-CHO', categoria: 'mezcla' },
            { id: 'mix_70', nombre: ['2,2,2-trifluoroetanol'], formula: 'CF₃-CH₂-OH', categoria: 'mezcla' },
            { id: 'mix_71', nombre: ['4-oxopentanal'], formula: 'CH₃-CO-CH₂-CH₂-CHO', categoria: 'mezcla' },
            { id: 'mix_72', nombre: ['2-cianoetanoato de metilo'], formula: 'NC-CH₂-COO-CH₃', categoria: 'mezcla' },
            { id: 'mix_73', nombre: ['acido 2-cianobut-2-enoico'], formula: 'CH₃-CH=C(CN)-COOH', categoria: 'mezcla' },
            { id: 'mix_74', nombre: ['acido but-2-inodioico'], formula: 'HOOC-C≡C-COOH', categoria: 'mezcla' },
            { id: 'mix_75', nombre: ['acido 2-sulfanilpropanoico'], formula: 'CH₃-CH(SH)-COOH', categoria: 'mezcla' },
            { id: 'mix_76', nombre: ['acido 2-amino-4-(metiltio)butanoico'], formula: 'CH₃-S-CH₂-CH₂-CH(NH₂)-COOH', categoria: 'mezcla' },
            { id: 'mix_77', nombre: ['dicarbamoilamina'], formula: 'H₂N-CO-NH-CO-NH₂', categoria: 'mezcla' },
            { id: 'mix_78', nombre: ['1,2-dietoxietano'], formula: 'CH₃-CH₂-O-CH₂-CH₂-O-CH₂-CH₃', categoria: 'mezcla' },
            { id: 'mix_79', nombre: ['3,3,5-trimetilhexanal'], formula: 'CH₃-CH(CH₃)-CH₂-C(CH₃)₂-CHO', categoria: 'mezcla' },
            { id: 'mix_80', nombre: ['acido 4-oxopent-2-enoico'], formula: 'HOOC-CH=CH-CO-CH₃', categoria: 'mezcla' },
            { id: 'mix_81', nombre: ['but-3-in-2-ol'], formula: 'CH₃-CH(OH)-C≡C-H', categoria: 'mezcla' },
            { id: 'mix_82', nombre: ['etoxieteno'], formula: 'CH₂=CH-O-CH₂-CH₃', categoria: 'mezcla' },
            { id: 'mix_83', nombre: ['anhidrido etanoico metanoico'], formula: 'CH₃-CO-O-CO-H', categoria: 'mezcla' },
            { id: 'mix_84', nombre: ['2-aminobutan-1-ol'], formula: 'CH₃-CH₂-CH(NH₂)-CH₂-OH', categoria: 'mezcla' },
            { id: 'mix_85', nombre: ['dietilsulfuro'], formula: 'CH₃-CH₂-S-CH₂-CH₃', categoria: 'mezcla' },
            { id: 'mix_86', nombre: ['dimetilsulfoxido'], formula: 'CH₃-SO-CH₃', categoria: 'mezcla' },
            { id: 'mix_87', nombre: ['isocianato de etilo'], formula: 'CH₃-CH₂-N=C=O', categoria: 'mezcla' },
            { id: 'mix_88', nombre: ['nitrato de etilo'], formula: 'CH₃-CH₂-O-NO₂', categoria: 'mezcla' },
            { id: 'mix_89', nombre: ['nitrito de etilo'], formula: 'CH₃-CH₂-O-NO', categoria: 'mezcla' },
            { id: 'mix_90', nombre: ['acetofenona'], formula: 'C₆H₅-CO-CH₃', categoria: 'mezcla' },
            { id: 'mix_91', nombre: ['fenilacetaldehido'], formula: 'C₆H₅-CH₂-CHO', categoria: 'mezcla' },
            { id: 'mix_92', nombre: ['metoxibenceno'], formula: 'C₆H₅-O-CH₃', categoria: 'mezcla' },
            { id: 'mix_93', nombre: ['acido 3-fenilpropenoico'], formula: 'C₆H₅-CH=CH-COOH', categoria: 'mezcla' },
            { id: 'mix_94', nombre: ['N-feniletanamida'], formula: 'CH₃-C(O)-NH-C₆H₅', categoria: 'mezcla' },
            { id: 'mix_95', nombre: ['acido 2-hidroxipropano-1,2,3-tricarboxilico'], formula: 'HOOC-CH₂-C(OH)(COOH)-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_96', nombre: ['1-bromo-2-buteno'], formula: 'CH₃-CH=CH-CH₂-Br', categoria: 'mezcla' },
            { id: 'mix_97', nombre: ['3-cloropropino'], formula: 'CH≡C-CH₂-Cl', categoria: 'mezcla' },
            { id: 'mix_98', nombre: ['prop-2-en-1-ol'], formula: 'CH₂=CH-CH₂-OH', categoria: 'mezcla' },
            { id: 'mix_99', nombre: ['3-oxobutanonitrilo'], formula: 'CH₃-CO-CH₂-CN', categoria: 'mezcla' },
            { id: 'mix_100', nombre: ['4-oxobutanonitrilo'], formula: 'CHO-CH₂-CH₂-CN', categoria: 'mezcla' },
            { id: 'mix_101', nombre: ['metoxieteno'], formula: 'CH₃-O-CH=CH₂', categoria: 'mezcla' },
            { id: 'mix_102', nombre: ['etanoato de etenilo'], formula: 'CH₃-COO-CH=CH₂', categoria: 'mezcla' },
            { id: 'mix_103', nombre: ['1,2,3-tricloropropano'], formula: 'CH₂(Cl)-CH(Cl)-CH₂(Cl)', categoria: 'mezcla' },
            { id: 'mix_104', nombre: ['2-etoxibutano'], formula: 'CH₃-CH₂-CH(CH₃)-O-CH₂-CH₃', categoria: 'mezcla' },
            { id: 'mix_105', nombre: ['butan-2-amina'], formula: 'CH₃-CH₂-CH(CH₃)-NH₂', categoria: 'mezcla' },
            { id: 'mix_106', nombre: ['1-nitro-2-metilpropano'], formula: 'CH₃-CH(CH₃)-CH₂-NO₂', categoria: 'mezcla' },
            { id: 'mix_107', nombre: ['2,2,4,4-tetrametilpentano'], formula: 'CH₃-C(CH₃)₂-CH₂-C(CH₃)₃', categoria: 'mezcla' },
            { id: 'mix_108', nombre: ['acido 2-bromo-3-clorobutanoico'], formula: 'CH₃-CH(Br)-CH(Cl)-COOH', categoria: 'mezcla' },
            { id: 'mix_109', nombre: ['pent-3-in-2-ol'], formula: 'CH₃-C≡C-CH(OH)-CH₃', categoria: 'mezcla' },
            { id: 'mix_110', nombre: ['acido aminoetanoico'], formula: 'H₂N-CH₂-COOH', categoria: 'mezcla' },
            { id: 'mix_111', nombre: ['tetracloruro de carbono'], formula: 'CCl₄', categoria: 'mezcla' }
        ];

        // --- ESTADO Y FUNCIONES (MANTENIDOS) ---
        let currentQuiz = { questions: [], currentIndex: 0, score: 0, category: '', history: [] };
        let globalScore = 0;
        let usedQuestionIds = [];

        document.addEventListener('DOMContentLoaded', () => { initHomeScreen(); });

        function initHomeScreen() {
            const categories = [...new Set(DB.map(item => item.categoria))];
            const grid = document.getElementById('category-grid');
            grid.innerHTML = '';
            // Configuración visual
            const config = { 'aromaticos': { icon: 'fa-atom', color: 'bg-indigo-600', label: 'Aromáticos' }, 'ciclos': { icon: 'fa-ring', color: 'bg-emerald-600', label: 'Ciclos' }, 'alcanos': { icon: 'fa-cubes', color: 'bg-slate-600', label: 'Alcanos' }, 'insaturados': { icon: 'fa-link', color: 'bg-orange-600', label: 'Alquenos/Inos' }, 'halogenuros': { icon: 'fa-vial', color: 'bg-teal-600', label: 'Halogenuros' }, 'alcoholes': { icon: 'fa-wine-bottle', color: 'bg-blue-500', label: 'Alcoholes' }, 'eteres': { icon: 'fa-wind', color: 'bg-sky-500', label: 'Éteres' }, 'aldehidos': { icon: 'fa-key', color: 'bg-violet-600', label: 'Aldehídos' }, 'cetonas': { icon: 'fa-tag', color: 'bg-fuchsia-600', label: 'Cetonas' }, 'acidos': { icon: 'fa-lemon', color: 'bg-red-600', label: 'Ácidos' }, 'esteres': { icon: 'fa-leaf', color: 'bg-rose-500', label: 'Ésteres/Sales' }, 'aminas': { icon: 'fa-fish', color: 'bg-cyan-600', label: 'Aminas' }, 'amidas': { icon: 'fa-box', color: 'bg-cyan-700', label: 'Amidas' }, 'nitrilos_nitro': { icon: 'fa-bolt', color: 'bg-amber-600', label: 'Nitrilos/Nitro' }, 'mezcla': { icon: 'fa-flask', color: 'bg-slate-800', label: 'Nivel Experto' } };
            const orderedCats = ['alcanos', 'insaturados', 'aromaticos', 'ciclos', 'halogenuros', 'alcoholes', 'eteres', 'aldehidos', 'cetonas', 'acidos', 'esteres', 'aminas', 'amidas', 'nitrilos_nitro', 'mezcla'];
            orderedCats.forEach(cat => {
                if (!categories.includes(cat)) return;
                const availableCount = DB.filter(i => i.categoria === cat && !usedQuestionIds.includes(i.id)).length;
                const totalCount = DB.filter(i => i.categoria === cat).length;
                const conf = config[cat] || { icon: 'fa-flask', color: 'bg-slate-500', label: capitalize(cat) };
                const btn = document.createElement('div');
                btn.className = `category-card cursor-pointer p-3 md:p-4 rounded-xl shadow-md relative overflow-hidden group text-white ${conf.color} h-28 md:h-32 flex flex-col justify-between`;
                btn.onclick = () => selectCategory(cat);
                btn.innerHTML = `<div class="absolute right-[-10px] bottom-[-10px] opacity-20 transform group-hover:scale-110 transition-transform"><i class="fas ${conf.icon} text-6xl md:text-7xl"></i></div><div class="relative z-10"><div class="text-lg md:text-xl font-bold leading-tight mb-1">${conf.label}</div></div><div class="relative z-10 text-xs font-medium bg-black/20 self-start px-2 py-1 rounded backdrop-blur-sm">${availableCount}/${totalCount}</div>`;
                grid.appendChild(btn);
            });
            // BOTONES EXTRA
            const infoBtn = document.createElement('div');
            infoBtn.className = `category-card cursor-pointer p-3 md:p-4 rounded-xl shadow-md relative overflow-hidden group text-white bg-amber-500 h-28 md:h-32 flex flex-col justify-between`;
            infoBtn.onclick = () => showInfoPanel();
            infoBtn.innerHTML = `<div class="absolute right-[-10px] bottom-[-10px] opacity-20 transform group-hover:scale-110 transition-transform"><i class="fas fa-graduation-cap text-6xl md:text-7xl"></i></div><div class="relative z-10"><div class="text-lg md:text-xl font-bold leading-tight mb-1">Guía Maestra</div></div><div class="relative z-10 text-xs font-medium bg-black/20 self-start px-2 py-1 rounded backdrop-blur-sm">Prioridades</div>`;
            grid.appendChild(infoBtn);
            const formulaBtn = document.createElement('div');
            formulaBtn.className = `category-card cursor-pointer p-3 md:p-4 rounded-xl shadow-md relative overflow-hidden group text-white bg-teal-600 h-28 md:h-32 flex flex-col justify-between`;
            formulaBtn.onclick = () => showFormulaGuidePanel();
            formulaBtn.innerHTML = `<div class="absolute right-[-10px] bottom-[-10px] opacity-20 transform group-hover:scale-110 transition-transform"><i class="fas fa-pen-fancy text-6xl md:text-7xl"></i></div><div class="relative z-10"><div class="text-lg md:text-xl font-bold leading-tight mb-1">Tipos de Fórmulas</div></div><div class="relative z-10 text-xs font-medium bg-black/20 self-start px-2 py-1 rounded backdrop-blur-sm">Ayuda</div>`;
            grid.appendChild(formulaBtn);
        }

        // LÓGICA DE NAVEGACIÓN Y QUIZ
        function selectCategory(cat) {
            currentQuiz.category = cat;
            const configHeader = document.getElementById('config-header');
            const colors = { 'aromaticos': 'bg-indigo-600', 'ciclos': 'bg-emerald-600', 'alcanos': 'bg-slate-600', 'insaturados': 'bg-orange-600', 'halogenuros': 'bg-teal-600', 'alcoholes': 'bg-blue-600', 'eteres': 'bg-sky-600', 'aldehidos': 'bg-violet-600', 'cetonas': 'bg-fuchsia-600', 'acidos': 'bg-red-600', 'esteres': 'bg-rose-600', 'aminas': 'bg-cyan-600', 'amidas': 'bg-cyan-800', 'nitrilos_nitro': 'bg-amber-600', 'mezcla': 'bg-slate-800' };
            configHeader.className = `px-6 py-8 text-center text-white transition-colors ${colors[cat] || 'bg-slate-700'}`;
            document.getElementById('home-screen').classList.add('hidden');
            document.getElementById('config-panel').classList.remove('hidden');
            const conf = { 'aromaticos': 'Aromáticos', 'ciclos': 'Ciclos', 'alcanos': 'Alcanos', 'insaturados': 'Insaturados', 'halogenuros': 'Halogenuros', 'alcoholes': 'Alcoholes', 'eteres': 'Éteres', 'aldehidos': 'Aldehídos', 'cetonas': 'Cetonas', 'acidos': 'Ácidos', 'esteres': 'Ésteres y Sales', 'aminas': 'Aminas', 'amidas': 'Amidas', 'nitrilos_nitro': 'Nitrilos y Nitro', 'mezcla': 'Nivel Experto' };
            document.getElementById('selected-topic-name').textContent = conf[cat] || capitalize(cat);
            updateAvailableCount();
        }
        function showInfoPanel() { document.getElementById('home-screen').classList.add('hidden'); document.getElementById('info-panel').classList.remove('hidden'); }
        function showFormulaGuidePanel() { document.getElementById('home-screen').classList.add('hidden'); document.getElementById('formula-guide-panel').classList.remove('hidden'); }
        function updateAvailableCount() {
            const cat = currentQuiz.category;
            const allCatItems = DB.filter(i => i.categoria === cat);
            const available = allCatItems.filter(i => !usedQuestionIds.includes(i.id));
            document.getElementById('questions-available').textContent = available.length;
        }
        function startQuiz(requestedCount) {
            let pool = DB.filter(i => i.categoria === currentQuiz.category && !usedQuestionIds.includes(i.id));
            if (pool.length < requestedCount) {
                if (pool.length === 0) {
                     const catIds = DB.filter(i => i.categoria === currentQuiz.category).map(i => i.id);
                     usedQuestionIds = usedQuestionIds.filter(id => !catIds.includes(id));
                     pool = DB.filter(i => i.categoria === currentQuiz.category);
                     alert("¡Mazo reiniciado! Has completado todas las preguntas de este tema.");
                } else { requestedCount = pool.length; }
            }
            const shuffled = [...pool].sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, requestedCount);
            selected.forEach(q => usedQuestionIds.push(q.id));
            currentQuiz.questions = selected;
            currentQuiz.currentIndex = 0;
            currentQuiz.score = 0;
            currentQuiz.history = [];
            document.getElementById('config-panel').classList.add('hidden');
            document.getElementById('exercise-panel').classList.remove('hidden');
            document.getElementById('q-total').textContent = selected.length;
            showQuestion();
        }
        function showQuestion() {
            const q = currentQuiz.questions[currentQuiz.currentIndex];
            document.getElementById('q-current').textContent = currentQuiz.currentIndex + 1;
            const progressPct = (currentQuiz.currentIndex / currentQuiz.questions.length) * 100;
            document.getElementById('progress-fill').style.width = `${progressPct}%`;
            const display = document.getElementById('formula-display');
            display.innerHTML = q.formula;
            if (!q.formula.includes('<svg')) {
                const len = q.formula.length;
                let sizeClass = 'text-2xl md:text-3xl';
                if (len > 30) sizeClass = 'text-lg md:text-xl'; else if (len > 20) sizeClass = 'text-xl md:text-2xl';
                display.className = `chem-font font-bold text-slate-800 inline-block transition-all duration-300 ${sizeClass} whitespace-nowrap`;
                if (len > 25) document.getElementById('formula-hint').classList.remove('hidden'); else document.getElementById('formula-hint').classList.add('hidden');
            } else { display.className = "inline-block"; document.getElementById('formula-hint').classList.add('hidden'); }
            const input = document.getElementById('answer-input');
            input.value = ''; input.disabled = false; input.focus();
            input.className = "w-full p-4 bg-slate-50 border-2 border-slate-200 rounded-2xl text-lg outline-none focus:border-indigo-500 focus:bg-white transition-all text-slate-700 font-medium placeholder-slate-400 text-center";
            document.getElementById('feedback-area').classList.add('hidden');
            document.getElementById('btn-check').classList.remove('hidden');
            document.getElementById('btn-next').classList.add('hidden');
        }
        function checkAnswer() {
            const input = document.getElementById('answer-input');
            const userVal = normalizeText(input.value);
            const currentQ = currentQuiz.questions[currentQuiz.currentIndex];
            const validAnswers = currentQ.nombre.map(normalizeText);
            const isCorrect = validAnswers.includes(userVal);
            currentQuiz.history.push({ rawFormula: currentQ.formula, userAnswer: input.value || "-", correctAnswer: currentQ.nombre[0], isCorrect: isCorrect });
            input.disabled = true;
            const fb = document.getElementById('feedback-area');
            fb.classList.remove('hidden'); fb.classList.remove('animate-shake');
            if (isCorrect) {
                currentQuiz.score++;
                input.classList.add('border-green-500', 'bg-green-50', 'text-green-800');
                fb.innerHTML = `<i class="fas fa-check-circle text-green-500 mt-1"></i> <span class="text-green-600">¡Correcto!</span>`;
            } else {
                input.classList.add('border-red-500', 'bg-red-50', 'text-red-800');
                fb.innerHTML = `<i class="fas fa-times-circle text-red-500 mt-1"></i> <span>Era: <span class="text-slate-800 uppercase font-bold">${currentQ.nombre[0]}</span></span>`;
                void fb.offsetWidth; fb.classList.add('animate-shake');
            }
            document.getElementById('btn-check').classList.add('hidden');
            document.getElementById('btn-next').classList.remove('hidden');
            document.getElementById('btn-next').focus();
            updateGlobalScore(isCorrect ? 10 : 0);
        }
        function nextQuestion() {
            currentQuiz.currentIndex++;
            if (currentQuiz.currentIndex < currentQuiz.questions.length) { showQuestion(); } else { showResults(); }
        }
        function showResults() {
            document.getElementById('exercise-panel').classList.add('hidden');
            document.getElementById('results-panel').classList.remove('hidden');
            document.getElementById('res-score').textContent = currentQuiz.score;
            document.getElementById('res-errors').textContent = currentQuiz.questions.length - currentQuiz.score;
            const listContainer = document.getElementById('results-list');
            listContainer.innerHTML = '';
            currentQuiz.history.forEach(item => {
                const card = document.createElement('div');
                card.className = "bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden";
                let displayFormula = item.rawFormula;
                if(!displayFormula.includes('<svg')) { displayFormula = `<div class="text-xl md:text-2xl font-bold font-mono text-slate-800 break-words">${displayFormula}</div>`; }
                card.innerHTML = `<div class="p-6 flex justify-center items-center bg-slate-50 border-b border-slate-100 min-h-[100px]">${displayFormula}</div><div class="p-4 flex justify-between items-center relative"><div class="flex-1 pr-4"><div class="mb-3"><span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1">Tu respuesta</span><div class="text-base font-medium ${item.isCorrect ? 'text-green-600' : 'text-red-500 line-through decoration-2'}">${item.userAnswer}</div></div>${!item.isCorrect ? `<div><span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider block mb-1">Solución</span><div class="text-indigo-600 font-bold text-sm bg-indigo-50 px-3 py-1.5 rounded-lg inline-block shadow-sm border border-indigo-100 uppercase">${item.correctAnswer}</div></div>` : ''}</div><div class="flex-shrink-0">${item.isCorrect ? '<div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center"><i class="fas fa-check text-green-600 text-lg"></i></div>' : '<div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center"><i class="fas fa-times text-red-500 text-lg"></i></div>'}</div></div>`;
                listContainer.appendChild(card);
            });
        }
        function resetApp() {
            ['config-panel', 'exercise-panel', 'results-panel', 'info-panel', 'formula-guide-panel'].forEach(id => document.getElementById(id).classList.add('hidden'));
            document.getElementById('home-screen').classList.remove('hidden');
            initHomeScreen();
            currentQuiz = { questions: [], currentIndex: 0, score: 0, category: '', history: [] };
        }
        function normalizeText(text) { return text.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/-/g, "").replace(/\s+/g, " "); }
        function capitalize(s) { return s.charAt(0).toUpperCase() + s.slice(1); }
        function updateGlobalScore(points) {
            globalScore += points;
            const el = document.getElementById('global-score');
            el.textContent = globalScore;
            el.classList.add('scale-125', 'text-yellow-400');
            setTimeout(() => el.classList.remove('scale-125', 'text-yellow-400'), 300);
        }
        document.getElementById('answer-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                if (!document.getElementById('btn-check').classList.contains('hidden')) checkAnswer();
                else nextQuestion();
            }
        });
    </script>
</body>
</html>
